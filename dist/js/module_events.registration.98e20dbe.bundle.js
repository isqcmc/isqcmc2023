(self.webpackChunk=self.webpackChunk||[]).push([[5462],{97772:(e,t,i)=>{"use strict";var n=i(86326),a=i(35623),r=(i(42383),i(29079)),s=i(97598),l=i.n(s),o=i(96478),d=i(99323),c=i(23507),m=i(33864),u=i(89152),_=i(59865),p=i(49528);function g(e){let{metadataURL:t,previewURL:i,sendURL:a,onClose:r}=e;const[s,l]=(0,n.useState)(0),{data:o,loading:g}=(0,_.Ku)(t),{senders:y=[],recipients:f=[],subject:b,body:v,placeholders:h=[]}=o||{};return g?n.createElement(d.A,{active:!0,page:!0,inverted:!0},n.createElement(c.A,null)):n.createElement(m.V,{onSubmit:async e=>{let t;try{t=await p.indicoAxios.post(a,e)}catch(e){return(0,u.handleSubmitError)(e)}l(t.data.count),setTimeout((()=>r()),5e3)},onClose:r,senders:y,recipients:f,previewURL:i,placeholders:h,initialFormValues:{subject:b,body:v},sentEmailsCount:s})}g.propTypes={metadataURL:l().string.isRequired,previewURL:l().string.isRequired,sendURL:l().string.isRequired,onClose:l().func.isRequired};const y=r.Ay.bind(null,{endpoint:"event_registration.api_invitations_reminders_metadata",rules:[{args:["event_id","reg_form_id"],converters:{event_id:"IntegerConverter",reg_form_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"registration",isDynamic:!1},{data:"/",isDynamic:!1},{data:"reg_form_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"invitations",isDynamic:!1},{data:"/",isDynamic:!1},{data:"reminders",isDynamic:!1},{data:"/",isDynamic:!1},{data:"metadata",isDynamic:!1}]}]},"/"),f=r.Ay.bind(null,{endpoint:"event_registration.api_invitations_reminders_preview",rules:[{args:["event_id","reg_form_id"],converters:{event_id:"IntegerConverter",reg_form_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"registration",isDynamic:!1},{data:"/",isDynamic:!1},{data:"reg_form_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"invitations",isDynamic:!1},{data:"/",isDynamic:!1},{data:"reminders",isDynamic:!1},{data:"/",isDynamic:!1},{data:"preview",isDynamic:!1}]}]},"/"),b=r.Ay.bind(null,{endpoint:"event_registration.api_invitations_reminders_send",rules:[{args:["event_id","reg_form_id"],converters:{event_id:"IntegerConverter",reg_form_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"registration",isDynamic:!1},{data:"/",isDynamic:!1},{data:"reg_form_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"invitations",isDynamic:!1},{data:"/",isDynamic:!1},{data:"reminders",isDynamic:!1},{data:"/",isDynamic:!1},{data:"send",isDynamic:!1}]}]},"/");function v(e){let{eventId:t,regformId:i,hasPendingInvitations:a}=e;const[r,s]=(0,n.useState)(!1),l=y({event_id:t,reg_form_id:i}),d=f({event_id:t,reg_form_id:i}),c=b({event_id:t,reg_form_id:i});return n.createElement(n.Fragment,null,n.createElement("button",{type:"button",className:"i-button icon-mail",disabled:!a,onClick:()=>s(!0)},n.createElement(o.Translate,null,"Send reminders")),r&&n.createElement(g,{metadataURL:l,previewURL:d,sendURL:c,onClose:()=>s(!1)}))}v.propTypes={eventId:l().number.isRequired,regformId:l().number.isRequired,hasPendingInvitations:l().bool.isRequired},function(e){function t(e){let{eventId:t,regformId:i,hasPendingInvitations:r}=e;const s=document.getElementById("email-pending-invitations-container");a.render(n.createElement(v,{eventId:t,regformId:i,hasPendingInvitations:r}),s)}window.setupInvitationPage=function(e){let{eventId:i,regformId:n,hasPendingInvitations:a}=e;$("#invitation-list").on("indico:confirmed",".js-invitation-action",(function(e){e.preventDefault();const a=$(this);$.ajax({url:a.data("href"),method:a.data("method"),complete:IndicoUI.Dialogs.Util.progress(),error:handleAjaxError,success(e){$("#invitation-list").html(e.invitation_list),t({eventId:i,regformId:n,hasPendingInvitations:e.has_pending_invitations})}})})),$(".js-invite-user").ajaxDialog({onClose(e){e&&($("#invitation-list").html(e.invitation_list),t({eventId:i,regformId:n,hasPendingInvitations:e.has_pending_invitations}))}}),t({eventId:i,regformId:n,hasPendingInvitations:a})}}();var h=i(65035),D=i(25584);window.setupRegistrationList=function(){function e(){$("table.i-table input.select-row").on("change",(function(){$(".regform-download-attachments").toggleClass("disabled",!$(".list input:checkbox:checked[data-has-files=true]").length)})).trigger("change"),$("table.i-table input.select-row").on("change",(function(){$(".regform-download-documents").toggleClass("disabled",!$(".list input:checkbox:checked[data-has-documents=true]").length)})).trigger("change")}setupListGenerator(),$("body").on("click","#preview-email",(function(){const e=$(this);ajaxDialog({url:e.data("href"),title:D.$T.gettext("Email Preview"),method:"POST",data:()=>({registration_id:getSelectedRows()[0],subject:$("#subject").val(),body:$("#body").val()})})})),$(".registrations").on("indico:confirmed",".js-delete-registrations",(function(e){e.preventDefault();const t=$(this),i=getSelectedRows(),n=D.$T.ngettext("Do you really want to delete the selected registration?","Do you really want to delete the {0} selected registrations?",i.length).format(i.length);confirmPrompt(n).then((function(){$.ajax({url:t.data("href"),method:t.data("method"),data:{registration_id:i},complete:IndicoUI.Dialogs.Util.progress(),error:handleAjaxError,success(){for(let e=0;e<i.length;e++)$(`#registration-${i[e]}`).fadeOut("fast",(function(){$(this).remove()}))}})}))})),$(".registrations").on("indico:confirmed",".js-modify-status",(function(t){t.preventDefault();const i=$(this),n=getSelectedRows();$.ajax({url:i.data("href"),method:i.data("method"),data:{registration_id:n,flag:i.data("flag")},complete:IndicoUI.Dialogs.Util.progress(),error:handleAjaxError,success(t){t&&($(".list-content").html(t.html),handleSelectedRowHighlight(!0),e(),setupTableSorter())}})})),$(".js-add-user").on("click",(async()=>{const e=await(0,h.showUserSearch)({withExternalUsers:!0,single:!0,alwaysConfirm:!0});if(e){const t=$(".js-add-user").data("href");location.href=build_url(t,{user:e})}})),$(".js-add-multiple-users").ajaxDialog({dialogClasses:"add-multiple-users-dialog",onClose(t){t&&($(".list-content").html(t.html),handleSelectedRowHighlight(!0),e(),setupTableSorter())}}),e()};var E=i(47279),T=i(77940),w=i(43057),q=i(49138);const R=["publishToParticipants","publishToPublic","value","useFinalForms"],O=l().oneOf(["hide_all","show_with_consent","show_all"]);function P(e){let{publishToParticipants:t,publishToPublic:i,value:a,useFinalForms:r}=e,s=(0,w.A)(e,R);if("hide_all"===t&&"hide_all"===i)return n.createElement(o.Translate,null,"Your participation will only be visible to organizers of this event.");if("show_all"===t&&"hide_all"===i)return n.createElement(o.Translate,null,"Your participation will be displayed to other participants of this event.");if("show_all"===t&&"show_all"===i)return n.createElement(o.Translate,null,"Your participation will be displayed to everyone who can see this event.");{const e=[];return"show_with_consent"!==t&&"nobody"!==a||e.push({key:"nobody",value:"nobody",text:o.Translate.string("Do not display my participation to anyone"),disabled:"show_with_consent"!==t}),e.push({key:"participants",value:"participants",text:o.Translate.string("Display my participation only to other participants of this event")}),"show_with_consent"!==i&&"all"!==a||e.push({key:"all",value:"all",text:o.Translate.string("Display my participation to everyone who can see this event"),disabled:"show_with_consent"!==i}),r?n.createElement(u.FinalDropdown,(0,T.A)({options:e,selection:!0,required:!0,fluid:!0},s)):n.createElement(q.A,(0,T.A)({options:e,selection:!0,fluid:!0,value:a},s))}}P.propTypes={publishToParticipants:O.isRequired,publishToPublic:O.isRequired,value:l().oneOf(["nobody","participants","all"]),useFinalForms:l().bool},P.defaultProps={value:null,useFinalForms:!1};const x=r.Ay.bind(null,{endpoint:"event_registration.api_registration_change_consent",rules:[{args:["event_id","reg_form_id"],converters:{event_id:"IntegerConverter",reg_form_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"registration",isDynamic:!1},{data:"/",isDynamic:!1},{data:"reg_form_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"privacy",isDynamic:!1},{data:"/",isDynamic:!1},{data:"consent",isDynamic:!1}]}]},"/");function A(e){let{locator:t,publishToParticipants:i,publishToPublic:a,initialConsentToPublish:r}=e;const[s,l]=(0,n.useState)(r),[o,d]=(0,n.useState)("");return n.createElement("div",{className:"events-registration-client-js-components-___ConsentToPublishEditor-module__consent-dropdown-container___0HGIs"},n.createElement(P,{publishToParticipants:i,publishToPublic:a,onChange:(e,i)=>{let{value:n}=i;return async function(e){l(e),d("loading");try{await p.indicoAxios.post(x(t),{consent_to_publish:e}),d("success")}catch(e){return d("error"),l(s),(0,p.handleAxiosError)(e)}}(n)},value:s,loading:"loading"===o,disabled:"loading"===o}),"success"===o&&n.createElement(E.A,{name:"check",color:"green"}),"error"===o&&n.createElement(E.A,{name:"x",color:"red"}))}A.propTypes={locator:l().object.isRequired,publishToParticipants:O.isRequired,publishToPublic:O.isRequired,initialConsentToPublish:l().oneOf(["nobody","participants","all"]).isRequired};var I=i(87493),C=i.n(I),S=i(61910),j=i.n(S),F=i(54219),N=i(45423),k=i(503),M=i(68809);const L=r.Ay.bind(null,{endpoint:"event_registration.api_registration_tags_assign",rules:[{args:["event_id","reg_form_id"],converters:{event_id:"IntegerConverter",reg_form_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"registration",isDynamic:!1},{data:"/",isDynamic:!1},{data:"reg_form_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"tags",isDynamic:!1},{data:"/",isDynamic:!1},{data:"assign",isDynamic:!1}]}]},"/");function U(e){let{eventId:t,regformId:i,registrationId:a,assignedTags:r,allTags:s}=e;const[l,d]=(0,n.useState)(r),[c,m]=(0,n.useState)(!1),u=j()(s,l,"id");async function _(e){let{add:n=[],remove:r=[]}=e;try{await p.indicoAxios.post(L({reg_form_id:i,event_id:t}),{registration_id:[a],add:n,remove:r})}catch(e){return(0,p.handleAxiosError)(e)}}const g=n.createElement(M.IButton,{disabled:0===u.length},n.createElement(o.Translate,null,"Add"),n.createElement(E.A,{name:"caret down",style:{marginRight:0}}));return n.createElement(n.Fragment,null,n.createElement("div",{className:"icon icon-tag"}),n.createElement("div",{className:"text"},n.createElement("div",{className:"label"},n.createElement(o.Translate,null,"Tags")),n.createElement("div",{className:"events-registration-client-js-components-___RegistrationTagsEditableList-module__removable-tags-container___C2Usb",style:{marginTop:0===l.length?"0":"3px"}},0===l.length?n.createElement(o.Translate,null,"No tags assigned."):l.map((e=>n.createElement(F.A,{size:"medium",key:e.title,className:"events-registration-client-js-components-___RegistrationTagsEditableList-module__registration-tag___nAtUC events-registration-client-js-components-___RegistrationTagsEditableList-module__removable___aNbCV",color:e.color},e.title,n.createElement(E.A,{name:"close",onClick:()=>function(e){d(l.filter((t=>t.id!==e.id))),_({remove:[e.id]})}(e)})))))),n.createElement("div",{className:"toolbar"},0===u.length?g:n.createElement(M.PopoverDropdownMenu,{onOpen:()=>m(!0),onClose:()=>m(!1),trigger:g,open:c,placement:"right-start"},n.createElement(N.A,{size:"small",textAlign:"center"},n.createElement(o.Translate,null,"Add tags")),n.createElement(k.A,{style:{margin:0}}),n.createElement("div",{className:"events-registration-client-js-components-___RegistrationTagsEditableList-module__selectable-tags-container___pwRX2"},u.map((e=>n.createElement("div",{key:e.title,onClick:()=>function(e){const t=C()([...l,e],[e=>e.title.toLowerCase()],"title");d(t),t.length===s.length&&m(!1),_({add:[e.id]})}(e)},n.createElement(F.A,{className:"events-registration-client-js-components-___RegistrationTagsEditableList-module__registration-tag___nAtUC events-registration-client-js-components-___RegistrationTagsEditableList-module__selectable___2VM7u",color:e.color},e.title))))))))}U.propTypes={eventId:l().number.isRequired,regformId:l().number.isRequired,registrationId:l().number.isRequired,assignedTags:l().arrayOf(l().shape({title:l().string.isRequired,color:l().string.isRequired})).isRequired,allTags:l().arrayOf(l().shape({title:l().string.isRequired,color:l().string.isRequired})).isRequired};var Y=i(44515),z=i(88996),H=i(36111),V=i(24372),B=i(45967);function J(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function G(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?J(Object(i),!0).forEach((function(t){(0,H.A)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):J(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}const Z=e=>e.staticData,K=e=>e.sections,W=e=>e.items,Q=(0,B.Mz)(W,((e,t)=>t),((e,t)=>e[t])),X=(0,B.Mz)(Z,(e=>e.currency)),ee=(0,B.Mz)(K,(e=>C()(Object.values(e).filter((e=>e.enabled)),["position","id"]))),te=(0,B.Mz)(K,W,((e,t)=>{const i=new Map(Object.values(e).map((e=>[e.id,[]])));return C()(Object.values(t),["position","id"]).forEach((e=>{i.get(e.sectionId).push(e)})),i})),ie=(0,B.Mz)(ee,te,((e,t)=>e.map((e=>G(G({},e),{},{items:t.get(e.id)}))))),ne=e=>e.uiLocked,ae=(0,B.Mz)(K,(e=>C()(Object.values(e).filter((e=>!e.enabled)),["position","id"]))),re=(0,B.Mz)(K,((e,t)=>t),((e,t)=>e[t])),se=(0,B.Mz)(W,((e,t)=>t),((e,t)=>e[t].sectionId)),le=(0,B.Mz)(Q,(e=>"label"===e.inputType)),oe=(0,B.Mz)(le,(e=>(t,i)=>e?t:i)),de=(0,B.Mz)(Z,(e=>{const{eventId:t,regformId:i}=e;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const a={event_id:t,reg_form_id:i};return null!==e&&(a.section_id=e),null!==n&&(a.field_id=n),a}}));function ce(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function me(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(i),!0).forEach((function(t){(0,H.A)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ce(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}const ue=r.Ay.bind(null,{endpoint:"event_registration.add_field",rules:[{args:["event_id","reg_form_id","section_id"],converters:{event_id:"IntegerConverter",reg_form_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"registration",isDynamic:!1},{data:"/",isDynamic:!1},{data:"reg_form_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"form",isDynamic:!1},{data:"/",isDynamic:!1},{data:"sections",isDynamic:!1},{data:"/",isDynamic:!1},{data:"section_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"fields",isDynamic:!1}]}]},"/"),_e=r.Ay.bind(null,{endpoint:"event_registration.add_section",rules:[{args:["event_id","reg_form_id"],converters:{event_id:"IntegerConverter",reg_form_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"registration",isDynamic:!1},{data:"/",isDynamic:!1},{data:"reg_form_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"form",isDynamic:!1},{data:"/",isDynamic:!1},{data:"sections",isDynamic:!1}]}]},"/"),pe=r.Ay.bind(null,{endpoint:"event_registration.add_text",rules:[{args:["event_id","reg_form_id","section_id"],converters:{event_id:"IntegerConverter",reg_form_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"registration",isDynamic:!1},{data:"/",isDynamic:!1},{data:"reg_form_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"form",isDynamic:!1},{data:"/",isDynamic:!1},{data:"sections",isDynamic:!1},{data:"/",isDynamic:!1},{data:"section_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"text",isDynamic:!1}]}]},"/"),ge=r.Ay.bind(null,{endpoint:"event_registration.modify_field",rules:[{args:["event_id","field_id","reg_form_id","section_id"],converters:{event_id:"IntegerConverter",reg_form_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"registration",isDynamic:!1},{data:"/",isDynamic:!1},{data:"reg_form_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"form",isDynamic:!1},{data:"/",isDynamic:!1},{data:"sections",isDynamic:!1},{data:"/",isDynamic:!1},{data:"section_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"fields",isDynamic:!1},{data:"/",isDynamic:!1},{data:"field_id",isDynamic:!0}]}]},"/"),ye=r.Ay.bind(null,{endpoint:"event_registration.modify_section",rules:[{args:["event_id","reg_form_id","section_id"],converters:{event_id:"IntegerConverter",reg_form_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"registration",isDynamic:!1},{data:"/",isDynamic:!1},{data:"reg_form_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"form",isDynamic:!1},{data:"/",isDynamic:!1},{data:"sections",isDynamic:!1},{data:"/",isDynamic:!1},{data:"section_id",isDynamic:!0}]}]},"/"),fe=r.Ay.bind(null,{endpoint:"event_registration.modify_text",rules:[{args:["event_id","field_id","reg_form_id","section_id"],converters:{event_id:"IntegerConverter",reg_form_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"registration",isDynamic:!1},{data:"/",isDynamic:!1},{data:"reg_form_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"form",isDynamic:!1},{data:"/",isDynamic:!1},{data:"sections",isDynamic:!1},{data:"/",isDynamic:!1},{data:"section_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"text",isDynamic:!1},{data:"/",isDynamic:!1},{data:"field_id",isDynamic:!0}]}]},"/"),be=r.Ay.bind(null,{endpoint:"event_registration.move_field",rules:[{args:["event_id","field_id","reg_form_id","section_id"],converters:{event_id:"IntegerConverter",reg_form_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"registration",isDynamic:!1},{data:"/",isDynamic:!1},{data:"reg_form_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"form",isDynamic:!1},{data:"/",isDynamic:!1},{data:"sections",isDynamic:!1},{data:"/",isDynamic:!1},{data:"section_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"fields",isDynamic:!1},{data:"/",isDynamic:!1},{data:"field_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"move",isDynamic:!1}]}]},"/"),ve=r.Ay.bind(null,{endpoint:"event_registration.move_section",rules:[{args:["event_id","reg_form_id","section_id"],converters:{event_id:"IntegerConverter",reg_form_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"registration",isDynamic:!1},{data:"/",isDynamic:!1},{data:"reg_form_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"form",isDynamic:!1},{data:"/",isDynamic:!1},{data:"sections",isDynamic:!1},{data:"/",isDynamic:!1},{data:"section_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"move",isDynamic:!1}]}]},"/"),he=r.Ay.bind(null,{endpoint:"event_registration.move_text",rules:[{args:["event_id","field_id","reg_form_id","section_id"],converters:{event_id:"IntegerConverter",reg_form_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"registration",isDynamic:!1},{data:"/",isDynamic:!1},{data:"reg_form_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"form",isDynamic:!1},{data:"/",isDynamic:!1},{data:"sections",isDynamic:!1},{data:"/",isDynamic:!1},{data:"section_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"text",isDynamic:!1},{data:"/",isDynamic:!1},{data:"field_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"move",isDynamic:!1}]}]},"/"),De=r.Ay.bind(null,{endpoint:"event_registration.toggle_field",rules:[{args:["event_id","field_id","reg_form_id","section_id"],converters:{event_id:"IntegerConverter",reg_form_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"registration",isDynamic:!1},{data:"/",isDynamic:!1},{data:"reg_form_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"form",isDynamic:!1},{data:"/",isDynamic:!1},{data:"sections",isDynamic:!1},{data:"/",isDynamic:!1},{data:"section_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"fields",isDynamic:!1},{data:"/",isDynamic:!1},{data:"field_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"toggle",isDynamic:!1}]}]},"/"),Ee=r.Ay.bind(null,{endpoint:"event_registration.toggle_section",rules:[{args:["event_id","reg_form_id","section_id"],converters:{event_id:"IntegerConverter",reg_form_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"registration",isDynamic:!1},{data:"/",isDynamic:!1},{data:"reg_form_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"form",isDynamic:!1},{data:"/",isDynamic:!1},{data:"sections",isDynamic:!1},{data:"/",isDynamic:!1},{data:"section_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"toggle",isDynamic:!1}]}]},"/"),Te=r.Ay.bind(null,{endpoint:"event_registration.toggle_text",rules:[{args:["event_id","field_id","reg_form_id","section_id"],converters:{event_id:"IntegerConverter",reg_form_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"registration",isDynamic:!1},{data:"/",isDynamic:!1},{data:"reg_form_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"form",isDynamic:!1},{data:"/",isDynamic:!1},{data:"sections",isDynamic:!1},{data:"/",isDynamic:!1},{data:"section_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"text",isDynamic:!1},{data:"/",isDynamic:!1},{data:"field_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"toggle",isDynamic:!1}]}]},"/"),we="Lock interface",qe="Unlock interface",Re="Set form data",Oe="Move section",Pe="Update section",xe="Toggle section",Ae="Remove section",Ie="Create section",Ce="Move item",Se="Update item",je="Remove item",Fe="Create item",Ne="Update positions";function ke(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];const a=(0,z.P$)(e,...i);return async e=>{e({type:we});const t=await a();return e({type:qe}),t}}function Me(e){return{type:Ne,items:e.items,sections:e.sections}}function Le(e,t){return{type:Oe,sourceIndex:e,targetIndex:t}}function Ue(e,t){return{type:xe,sectionId:e,enabled:t}}function Ye(e,t,i){return{type:Ce,sectionId:e,sourceIndex:t,targetIndex:i}}function $e(e,t){return{type:Se,itemId:e,data:t}}function ze(e){return async(t,i)=>{const n=i(),a=ye(de(n)(e)),r=await ke((()=>p.indicoAxios.delete(a)))(t);return r.error||t(function(e){return{type:Ae,sectionId:e}}(e)),!!r.error}}function He(e,t){return async(i,n)=>{const a=n(),r=ye(de(a)(e)),s={changes:t},l=await(0,z.HX)((()=>p.indicoAxios.patch(r,s)))(i);return l.error||(delete l.data.items,i(function(e,t){return{type:Pe,sectionId:e,data:t,patch:arguments.length>2&&void 0!==arguments[2]&&arguments[2]}}(e,l.data))),(0,V.camelizeKeys)(l)}}function Ve(e){return async(t,i)=>{const n=i(),a=_e(de(n)()),r=await(0,z.HX)((()=>p.indicoAxios.post(a,e)))(t);return r.error||(delete r.data.items,t(function(e){return{type:Ie,data:e}}(r.data))),(0,V.camelizeKeys)(r)}}function Be(e){return async(t,i)=>{const n=i(),a=se(n,e),r=oe(n,e)(fe,ge)(de(n)(a,e)),s=await ke((()=>p.indicoAxios.delete(r)))(t);return s.error||t(function(e){return{type:je,itemId:e}}(e)),!!s.error}}function Je(e,t,i){return async(n,a)=>{const r=a(),s=("label"===t?pe:ue)(de(r)(e)),l={fieldData:me(me({},i),{},{input_type:t})},o=await(0,z.HX)((()=>p.indicoAxios.post(s,l)))(n);return o.error||n(function(e){return{type:Fe,data:e}}(o.data.view_data)),(0,V.camelizeKeys)(o)}}var Ge=i(92464),Ze=i.n(Ge),Ke=i(18757),We=i.n(Ke);function Qe(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Xe(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(i),!0).forEach((function(t){(0,H.A)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Qe(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}const et={uiLocked:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case we:return!0;case qe:return!1;default:return e}},items:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Re:return t.items;case Fe:return Xe(Xe({},e),{},{[t.data.id]:t.data});case Se:return Xe(Xe({},e),{},{[t.itemId]:t.data});case Ne:{const i=Xe({},e);return Object.entries(t.items).filter((e=>{let[t]=e;return t in i})).forEach((e=>{let[t,n]=e;i[t]=Xe(Xe({},i[t]),{},{position:n})})),i}case je:return We()(e,t.itemId);case Ae:return Ze()(e,(e=>e.sectionId===t.sectionId));case Ce:{const i=C()(Object.values(e).filter((e=>e.sectionId===t.sectionId)),["position","id"]),n=i[t.sourceIndex];i.splice(t.sourceIndex,1),i.splice(t.targetIndex,0,n);let a=1,r=1e3;const s=Xe({},e);return i.forEach((e=>{s[e.id]=Xe(Xe({},e),{},{position:e.isEnabled?a++:r++})})),s}default:return e}},sections:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Re:return t.sections;case xe:return Xe(Xe({},e),{},{[t.sectionId]:Xe(Xe({},e[t.sectionId]),{},{enabled:t.enabled})});case Ie:return Xe(Xe({},e),{},{[t.data.id]:t.data});case Pe:return Xe(Xe({},e),{},{[t.sectionId]:t.patch?Xe(Xe({},e[t.sectionId]),t.data):t.data});case Ne:{const i=Xe({},e);return Object.entries(t.sections).filter((e=>{let[t]=e;return t in i})).forEach((e=>{let[t,n]=e;i[t]=Xe(Xe({},i[t]),{},{position:n})})),i}case Ae:return We()(e,t.sectionId);case Oe:{const i=C()(Object.values(e),["position","id"]),n=i[t.sourceIndex];i.splice(t.sourceIndex,1),i.splice(t.targetIndex,0,n);let a=1,r=1e3;const s=Xe({},e);return i.forEach((e=>{s[e.id]=Xe(Xe({},e),{},{position:e.enabled?a++:r++})})),s}default:return e}}};var tt=i(10531),it=i(88467),nt=i(42430),at=i(96446),rt=i(57427),st=i(16520),lt=i(92117);const ot="events-registration-client-styles-___regform-module__field___mpG7J";function dt(e){let{id:t,title:i}=e;const a=(0,Y.useDispatch)(),[r,s]=(0,n.useState)(!1);return n.createElement(rt.A,null,n.createElement("span",null,i),n.createElement("div",{className:"events-registration-client-styles-___regform-module__actions___yuXgO"},n.createElement(st.A,{content:o.Translate.string("Restore"),trigger:n.createElement(E.A,{name:"undo",color:"grey",size:"small",onClick:()=>{var e;a((e=t,async(t,i)=>{const n=i(),a=de(n)(e),r=Ee(me(me({},a),{},{enable:"true"})),s=await ke((()=>p.indicoAxios.post(r)))(t);s.error||(t(Ue(e,!0)),t(Me(s.data.positions)))}))},circular:!0,inverted:!0})}),n.createElement(st.A,{content:o.Translate.string("Delete"),trigger:n.createElement(E.A,{name:"trash",color:"red",size:"small",onClick:()=>{s(!0)},circular:!0,inverted:!0})})),n.createElement(M.RequestConfirmDelete,{requestFunc:()=>a(ze(t)),onClose:()=>s(!1),open:r,size:"mini",persistent:!0},n.createElement(o.Translate,null,'Are you sure you want to delete the section "',n.createElement(o.Param,{name:"field",value:i,wrapper:n.createElement("strong",null)}),'"?')))}function ct(e){let{onClose:t}=e;const i=(0,Y.useSelector)(ae);return(0,n.useEffect)((()=>{i.length||t()}),[t,i.length]),n.createElement(lt.A,{open:!0,closeIcon:!0,size:"mini",onClose:t},n.createElement(lt.A.Header,null,n.createElement(o.Translate,null,"Disabled sections")),n.createElement(lt.A.Content,null,n.createElement("div",{className:"events-registration-client-styles-___regform-module__disabled-sections___TthNB"},i.length?i.map((e=>n.createElement(dt,(0,T.A)({key:e.id},e)))):o.Translate.string("There are no disabled sections."))))}dt.propTypes={id:l().number.isRequired,title:l().string.isRequired},ct.propTypes={onClose:l().func.isRequired};var mt=i(63173);function ut(e){let{id:t,onClose:i}=e;const a=(0,Y.useDispatch)(),r=null!==t,{title:s,description:l,isPersonalData:d,isManagerOnly:c}=(0,Y.useSelector)((e=>r?re(e,t):{}));return n.createElement(mt.Sz,{id:"regform-section-settings",onSubmit:async e=>{const n=r?He(t,e):Ve(e),s=await a(n);if(s.error)return s.error;i()},onClose:i,initialValues:r?{title:s,description:l,is_manager_only:c}:null,header:r?n.createElement(o.Translate,null,'Configure section "',n.createElement(o.Param,{name:"section",value:s}),'"'):n.createElement(o.Translate,null,"Add new section")},n.createElement(u.FinalInput,{name:"title",label:o.Translate.string("Title"),required:!0,autoFocus:!0}),n.createElement(u.FinalTextArea,{name:"description",label:o.Translate.string("Description"),description:n.createElement(o.Translate,null,"You can use Markdown or basic HTML formatting tags.")}),n.createElement(u.FinalCheckbox,{disabled:d,name:"is_manager_only",label:o.Translate.string("Manager-only"),description:n.createElement(o.Translate,null,"Whether the section is only visible for managers.")}))}ut.propTypes={id:l().number,onClose:l().func.isRequired},ut.defaultProps={id:null};var _t=i(68373),pt=i.n(_t),gt=i(64771),yt=i(6423),ft=i(94900),bt=i(18606);(0,B.Mz)(Z,(e=>e.userInfo));const vt=(0,B.Mz)(Z,(e=>!!e.registrationUuid)),ht=(0,B.Mz)(Z,(e=>e.registrationData)),Dt=(0,B.Mz)(Z,(e=>e.moderated)),Et=(0,B.Mz)(Z,(e=>e.management||!1)),Tt=(0,B.Mz)(Z,(e=>e.paid||!1)),wt=(0,B.Mz)(Z,(e=>e.publishToParticipants)),qt=(0,B.Mz)(Z,(e=>e.publishToPublic)),Rt=(0,B.Mz)(vt,ht,((e,t)=>Q(e,t)),((e,t,i)=>e?t[i.htmlName]:void 0)),Ot=(0,B.Mz)(Tt,((e,t)=>Q(e,t)),((e,t)=>Rt(e,t)),((e,t,i)=>{if(!e)return!1;if(t.price>0)return!0;if(void 0!==i&&t.choices){let e;return e="string"==typeof i?e=>e.id===i:i.choice?e=>e.id===i.choice:e=>i[e.id]>0,!!t.choices.find((t=>t.price>0&&e(t)))}return!1}));var Pt=i(78434),xt=i.n(Pt),At=i(14867),It=i.n(At),Ct=i(11052);function St(e){let{paid:t,management:i,choice:a}=e,r=null,s=null;return a._deleted?r=n.createElement(o.Translate,null,"The currently chosen option is not available anymore. If you unselect it you won't be able to choose it back."):a._modified&&(r=a.price?n.createElement(o.Translate,null,"The currently chosen option has been modified. If you unselect it you may not be able to select it again for the same price."):n.createElement(o.Translate,null,"The currently chosen option has been modified. If you unselect it you may not be able to select it again.")),t&&!i?s=n.createElement(o.Translate,null,"This option could trigger a price change and has been blocked."):t&&(s=n.createElement(o.Translate,null,"Choosing this option will result in a price change.")),r||s?n.createElement(n.Fragment,null,a.caption," ",r&&n.createElement(st.A,{trigger:n.createElement(E.A,{name:"warning sign",color:"orange"})},r),r&&s&&" ",s&&n.createElement(st.A,{trigger:n.createElement(E.A,{name:"warning sign",color:"orange"})},s)):a.caption}St.propTypes={paid:l().bool.isRequired,management:l().bool.isRequired,choice:l().shape({caption:l().string.isRequired,price:l().number,_deleted:l().bool,_modified:l().bool}).isRequired};var jt=i(50090),Ft=i(30397),Nt=i(56237),kt=i(51479);const Mt={"./ChoicesSetup.module.scss":{"choices-table-wrapper":"events-registration-client-js-form-fields-___ChoicesSetup-module__choices-table-wrapper___qY3fA","choices-table":"events-registration-client-js-form-fields-___ChoicesSetup-module__choices-table___w2Tu2","table-sortable-handle":"events-registration-client-js-form-fields-___ChoicesSetup-module__table-sortable-handle___D7vqk","empty-row":"events-registration-client-js-form-fields-___ChoicesSetup-module__empty-row___OpJWg","disabled-row":"events-registration-client-js-form-fields-___ChoicesSetup-module__disabled-row___fT9s2"}};function Lt(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Ut(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(i),!0).forEach((function(t){(0,H.A)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Lt(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}const Yt={id:l().string.isRequired,caption:l().string.isRequired,isEnabled:l().bool.isRequired,price:l().number.isRequired,placesLimit:l().number,maxExtraSlots:l().number};function $t(e){let{onFocus:t,onBlur:i,onChange:a,disabled:r,value:s,withExtraSlots:l,forAccommodation:d}=e;const c=(0,Y.useSelector)(X),m=e=>()=>a(s.filter((t=>t.id!==e))),u=(e,t)=>{const i=[...s],n=i[e];i.splice(e,1),i.splice(t,0,n),a(i)};return n.createElement(n.Fragment,null,n.createElement(at.S,{className:"events-registration-client-js-form-fields-___ChoicesSetup-module__choices-table-wrapper___qY3fA",accept:"regform-item-choice"},n.createElement("table",{className:"events-registration-client-js-form-fields-___ChoicesSetup-module__choices-table___w2Tu2"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{style:{width:"1.75em"}}),n.createElement("th",null,n.createElement(o.Translate,null,"Caption")),n.createElement("th",{style:{width:"7em"}},n.createElement(o.Translate,null,"Price (",n.createElement(o.Param,{name:"currency",value:c}),")")),n.createElement("th",{style:{width:"7em"}},n.createElement(o.Translate,null,"Limit")),l?n.createElement("th",{colSpan:"2"},n.createElement(o.Translate,null,"Max. extra slots")):n.createElement("th",{style:{width:"3.7em"}}))),n.createElement("tbody",null,s.map(((e,o)=>{return n.createElement(Ht,(0,T.A)({key:e.id,index:o,withExtraSlots:l,onChange:(d=e.id,(e,t)=>a(s.map((i=>i.id!==d?i:Ut(Ut({},i),{},{[e]:t}))))),onDelete:m(e.id),onMove:u,fieldProps:{onFocus:t,onBlur:i,disabled:r}},e));var d}))))),d&&n.createElement("p",{className:"field-description",style:{textAlign:"end",marginTop:"-1em",marginBottom:"1em"}},n.createElement(o.Translate,null,"All prices are per night")),n.createElement(Nt.A,{type:"button",onClick:()=>{const e={id:`new:${(0,Ft.Ak)()}`,caption:"",isEnabled:!0,price:0,placesLimit:0};d||(e.maxExtraSlots=0),a([...s,e])},disabled:r},n.createElement(o.Translate,null,"Add new")))}$t.propTypes={onFocus:l().func.isRequired,onBlur:l().func.isRequired,onChange:l().func.isRequired,value:l().arrayOf(l().shape(Yt)).isRequired,disabled:l().bool.isRequired,withExtraSlots:l().bool,forAccommodation:l().bool},$t.defaultProps={withExtraSlots:!1,forAccommodation:!1};const zt=(0,jt.A)({field:"choices",updates:e=>({isPriceSet:e.some((e=>e.price))})});function Ht(e){let{withExtraSlots:t,fieldProps:i,index:a,id:r,caption:s,price:l,placesLimit:d,maxExtraSlots:c,extraSlotsPay:m,isEnabled:u,isNoAccommodation:_,onChange:p,onMove:g,onDelete:y}=e;const[f,b,v]=(0,at.f)({type:"regform-item-choice",id:r,index:a,active:!i.disabled,separateHandle:!0,moveItem:g,onDrop:()=>null}),h=e=>t=>{const i=t.target;"checkbox"===i.type?p(e,i.checked):"number"===i.type?p(e,+i.value):p(e,i.value)};return n.createElement("tr",{ref:b,style:v,className:(0,gt.A)(u?void 0:"disabled-row",Mt,{autoResolveMultipleImports:!0,handleMissingStyleName:"throw"})},n.createElement("td",{className:"events-registration-client-js-form-fields-___ChoicesSetup-module__table-sortable-handle___D7vqk",ref:f}),n.createElement("td",null,n.createElement("input",{type:"text",name:"caption",value:s,required:!0,onChange:h("caption"),placeholder:_?o.Translate.string("No accommodation"):void 0})),n.createElement("td",null,!_&&n.createElement("input",(0,T.A)({type:"number",name:"price",min:"0",step:"0.01",value:l||"",onChange:h("price")},i))),n.createElement("td",null,!_&&n.createElement("input",(0,T.A)({type:"number",name:"placesLimit",min:"0",value:d||"",onChange:h("placesLimit")},i))),!_&&t&&n.createElement("td",{style:{width:0}},n.createElement(kt.A,(0,T.A)({type:"number",name:"maxExtraSlots",min:"0",value:c,onChange:h("maxExtraSlots"),icon:{name:"dollar",link:!0,color:m?"blue":"grey",title:o.Translate.string("Extra slots pay"),onClick:()=>p("extraSlotsPay",!m)},style:{width:"7.5em"}},i))),n.createElement("td",{style:{textAlign:"end"}},!_&&n.createElement("a",{className:"icon-remove remove-row",title:o.Translate.string("Remove row"),onClick:i.disabled?void 0:y}),u?n.createElement("a",{className:"icon-disable",title:o.Translate.string("Disable choice"),onClick:()=>p("isEnabled",!1)}):n.createElement("a",{className:"icon-checkmark remove-row",title:o.Translate.string("Enable choice"),onClick:()=>p("isEnabled",!0)})))}function Vt(e){let{placesLimit:t,placesUsed:i,isEnabled:a}=e;const r=t-i,s=r>0?a?"green":"grey":"red";return n.createElement(F.A,{color:s,style:{whiteSpace:"nowrap"}},r>0?n.createElement(o.PluralTranslate,{count:r},n.createElement(o.Singular,null,n.createElement(o.Param,{name:"count",value:r})," place left"),n.createElement(o.Plural,null,n.createElement(o.Param,{name:"count",value:r})," places left")):n.createElement(o.Translate,null,"No places left"))}Ht.propTypes=Ut({withExtraSlots:l().bool.isRequired,fieldProps:l().object.isRequired,onChange:l().func.isRequired,onMove:l().func.isRequired,onDelete:l().func.isRequired},Yt),Vt.propTypes={placesLimit:l().number.isRequired,placesUsed:l().number.isRequired,isEnabled:l().bool.isRequired};function Bt(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Jt(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(i),!0).forEach((function(t){(0,H.A)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Bt(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Gt(e){let{id:t,existingValue:i,value:a,onChange:r,disabled:s,isPurged:l,choices:d,arrival:c,departure:m,placesUsed:u}=e;const _=(0,Y.useSelector)(Tt),p=(0,Y.useSelector)(Et),g=(0,Y.useSelector)(X),y=d.find((e=>e.id===a.choice)),[f,b]=(0,n.useState)(null),v=(0,Ct.toMoment)(c.startDate,It().HTML5_FMT.DATE),h=(0,Ct.toMoment)(c.endDate,It().HTML5_FMT.DATE),D=(0,Ct.toMoment)(m.startDate,It().HTML5_FMT.DATE),E=(0,Ct.toMoment)(m.endDate,It().HTML5_FMT.DATE),T=a.arrivalDate?Math.max(1,It()(D).diff(It()(a.arrivalDate),"days")+1):1,w=a.arrivalDate&&a.departureDate?It()(a.departureDate).diff(It()(a.arrivalDate),"days"):0,q=e=>e.price>0&&_,R=e=>!p&&q(e);return n.createElement("div",{className:"events-registration-client-styles-___regform-module__accommodation-field___WHQ+0"},n.createElement("table",{className:"events-registration-client-js-form-fields-___table-module__choice-table___nw5lF",role:"presentation"},n.createElement("tbody",null,d.filter((e=>e.isEnabled||!e.isNoAccommodation)).map(((e,d)=>{return n.createElement("tr",{key:e.id,className:"events-registration-client-js-form-fields-___table-module__row___kh-Ns"},n.createElement("td",null,n.createElement(yt.A.Radio,{id:t?`${t}-${d}`:"",style:{pointerEvents:"auto"},className:"events-registration-client-js-form-fields-___table-module__radio___wfFj9",label:{children:n.createElement(St,{choice:e,management:p,paid:q(e)})},key:e.id,value:e.id,disabled:!e.isEnabled||s||R(e)||e.placesLimit>0&&(u[e.id]||0)>=e.placesLimit&&e.id!==i.choice,checked:!l&&e.id===a.choice,onChange:(c=e,()=>{const e=Jt(Jt({},a),{},{choice:c.id,isNoAccommodation:c.isNoAccommodation});c.isNoAccommodation&&(delete e.arrivalDate,delete e.departureDate),r(e)})})),n.createElement("td",null,e.isEnabled&&!!e.price&&n.createElement(F.A,{pointing:"left"},o.Translate.string("{price} {currency} per night",{price:e.price.toFixed(2),currency:g}))),n.createElement("td",null,0===e.placesLimit?null:n.createElement(Vt,{placesLimit:e.placesLimit,placesUsed:u[e.id]||0,isEnabled:!s&&e.isEnabled&&!R(e)})));var c})))),null!==a.choice&&!a.isNoAccommodation&&n.createElement("div",{className:"events-registration-client-styles-___regform-module__date-picker___zVaWU"},n.createElement(M.DatePeriodField,{onChange:e=>{let{startDate:t,endDate:i}=e;r(Jt(Jt({},a),{},{arrivalDate:t,departureDate:i}))},onFocus:()=>{},onBlur:()=>{},disabledDate:e=>"startDate"===f?!e.isBetween(v,h,"day","[]"):!e.isBetween(v,E,"day","[]"),initialVisibleMonth:()=>v,onFieldFocusChange:b,minimumDays:T,value:{startDate:a.arrivalDate,endDate:a.departureDate},extraPickerProps:{block:!1,startDatePlaceholderText:o.Translate.string("Arrival"),endDatePlaceholderText:o.Translate.string("Departure")}}),!!y.price&&n.createElement(F.A,{pointing:"left",className:"events-registration-client-styles-___regform-module__price-tag___pz3tt"},o.Translate.string("Total: {total} {currency}",{total:(w*y.price).toFixed(2),currency:g}))))}function Zt(e){let{id:t,htmlId:i,htmlName:a,disabled:r,isRequired:s,isPurged:l,choices:d,arrival:c,departure:m,placesUsed:_}=e;const p=(0,Y.useSelector)((e=>Rt(e,t)))||{choice:null};return n.createElement(u.FinalField,{id:i,name:a,existingValue:p,component:Gt,required:s,disabled:r,isPurged:l,choices:d,arrival:c,departure:m,placesUsed:_,validate:e=>null===e.choice?s?o.Translate.string("You must select an option"):void 0:e.isNoAccommodation||e.arrivalDate&&e.departureDate?void 0:o.Translate.string("You must select the arrival and departure date"),isEqual:xt()})}Gt.propTypes={id:l().string.isRequired,value:l().object.isRequired,onChange:l().func.isRequired,disabled:l().bool.isRequired,isPurged:l().bool.isRequired,choices:l().arrayOf(l().shape(Yt)).isRequired,arrival:l().shape({startDate:l().string.isRequired,endDate:l().string.isRequired}).isRequired,departure:l().shape({startDate:l().string.isRequired,endDate:l().string.isRequired}).isRequired,placesUsed:l().objectOf(l().number).isRequired,existingValue:l().shape({choice:l().string}).isRequired},Zt.propTypes={id:l().number.isRequired,htmlId:l().string.isRequired,htmlName:l().string.isRequired,disabled:l().bool,isRequired:l().bool,isPurged:l().bool.isRequired,choices:l().arrayOf(l().shape(Yt)).isRequired,arrival:l().shape({startDate:l().string.isRequired,endDate:l().string.isRequired}).isRequired,departure:l().shape({startDate:l().string.isRequired,endDate:l().string.isRequired}).isRequired,placesUsed:l().objectOf(l().number).isRequired},Zt.defaultProps={disabled:!1,isRequired:!1};function Kt(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Wt(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Kt(Object(i),!0).forEach((function(t){(0,H.A)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Kt(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Qt(e){let{value:t,header:i,onSubmit:a,onClose:r}=e;return n.createElement(mt.Sz,{id:"accompanyingperson-form",onSubmit:a,onClose:r,initialValues:t,header:i},n.createElement(u.FinalInput,{name:"firstName",label:o.Translate.string("First Name"),required:!0,autoFocus:!0}),n.createElement(u.FinalInput,{name:"lastName",label:o.Translate.string("Last Name"),required:!0}))}function Xt(e,t,i,n,a){if(null===e)return t?[i,t]:[null,1/0];{const r=function(e,t){return Object.values(e).filter((e=>"accompanying_persons"===e.inputType&&e.personsCountAgainstLimit)).map((e=>e.htmlName)).reduce(((e,i)=>{var n;return e+(null===(n=t.values[i])||void 0===n?void 0:n.length)||0}),0)}(n,a);return!t||t>=e-r?[r,e]:[i,t]}}function ei(e){let{id:t,value:i,disabled:a,onChange:r,price:s,availablePlaces:l,maxPersons:d}=e;const[c,m]=(0,n.useState)({type:null,person:null}),u=(0,Y.useSelector)(X),_=(i.length*s).toFixed(2),p=(0,Y.useSelector)(W),g=(0,nt.useFormState)(),[y,f]=Xt(l,d,i.length,p,g),b=e=>{switch(e.type){case"ADD":return[...i,Wt({id:`new:${(0,Ft.Ak)()}`},e.person)];case"EDIT":return i.map((t=>t.id===e.person.id?e.person:t));case"REMOVE":return i.filter((t=>t.id!==e.id))}},v=()=>{m({type:null,person:null})};return n.createElement(yt.A.Group,{className:"events-registration-client-styles-___regform-module__accompanyingpersons-field___MUvS6"},n.createElement("ul",null,!i.length&&n.createElement("li",{className:"events-registration-client-styles-___regform-module__light___gdy5g"},n.createElement(o.Translate,null,"No accompanying persons registered")),i.map((e=>n.createElement("li",{key:e.id},n.createElement("span",null,e.firstName," ",e.lastName),n.createElement("div",{className:"events-registration-client-styles-___regform-module__actions___yuXgO"},n.createElement("a",{className:"icon-edit",title:o.Translate.string("Edit this person"),onClick:()=>{return t=e.id,void m({type:"EDIT",person:i.find((e=>e.id===t))});var t}}),n.createElement("a",{className:"icon-remove",title:o.Translate.string("Remove this person"),onClick:()=>{return t=e.id,void r(b({type:"REMOVE",id:t}));var t}})))))),n.createElement("div",{className:"events-registration-client-styles-___regform-module__summary___Krn7Y"},n.createElement(Nt.A,{size:"small",type:"button",onClick:()=>{m({type:"ADD",person:null})},disabled:a||f-y==0,"aria-describedby":t?`${t}-placeslimit`:""},n.createElement(o.Translate,null,"Add accompanying person")),!!s&&n.createElement(F.A,{basic:!0,pointing:"left",className:"events-registration-client-styles-___regform-module__price-tag___pz3tt",size:"small"},s.toFixed(2)," ",u," (Total: ",_," ",u,")"),f!==1/0&&n.createElement("div",{id:`${t}-placeslimit`,className:"events-registration-client-styles-___regform-module__places-left___6O4Ev"},n.createElement(Vt,{placesLimit:f,placesUsed:y,isEnabled:!a}))),["ADD","EDIT"].includes(c.type)&&n.createElement(Qt,{header:"EDIT"===c.type?o.Translate.string("Edit accompanying person"):o.Translate.string("Add accompanying person"),onSubmit:e=>{r(b({type:c.type,person:e})),v()},value:c.person,onClose:v}))}function ti(e){let{htmlId:t,htmlName:i,disabled:a,price:r,availablePlaces:s,maxPersons:l}=e;return n.createElement(u.FinalField,{id:t,name:i,component:ei,disabled:a,price:r,availablePlaces:s,maxPersons:l})}Qt.propTypes={value:l().shape({id:l().string.isRequired,firstName:l().string.isRequired,lastName:l().string.isRequired}),header:l().string.isRequired,onSubmit:l().func.isRequired,onClose:l().func.isRequired},Qt.defaultProps={value:{id:null,firstName:null,lastName:null}},ei.propTypes={id:l().string.isRequired,value:l().arrayOf(l().shape({id:l().string.isRequired,firstName:l().string.isRequired,lastName:l().string.isRequired})).isRequired,disabled:l().bool,onChange:l().func.isRequired,price:l().number,availablePlaces:l().number,maxPersons:l().number},ei.defaultProps={disabled:!1,price:0,availablePlaces:null,maxPersons:null},ti.propTypes={htmlId:l().string.isRequired,htmlName:l().string.isRequired,disabled:l().bool,price:l().number,availablePlaces:l().number,maxPersons:l().number},ti.defaultProps={disabled:!1,price:0,availablePlaces:null,maxPersons:null};const ii={"../../../styles/regform.module.scss":{"setup-toolbar":"events-registration-client-styles-___regform-module__setup-toolbar___tu1Kv","disabled-sections":"events-registration-client-styles-___regform-module__disabled-sections___TthNB",actions:"events-registration-client-styles-___regform-module__actions___yuXgO","form-item":"events-registration-client-styles-___regform-module__form-item___AlbiE",disabled:"events-registration-client-styles-___regform-module__disabled___A4p+q",content:"events-registration-client-styles-___regform-module__content___dKw31","paid-disabled":"events-registration-client-styles-___regform-module__paid-disabled___e8zT-","purged-disabled":"events-registration-client-styles-___regform-module__purged-disabled___oo16L",label:"events-registration-client-styles-___regform-module__label___t11lD",field:"events-registration-client-styles-___regform-module__field___mpG7J","price-tag":"events-registration-client-styles-___regform-module__price-tag___pz3tt","places-left":"events-registration-client-styles-___regform-module__places-left___6O4Ev",greyed:"events-registration-client-styles-___regform-module__greyed___HZLen","number-field":"events-registration-client-styles-___regform-module__number-field___LtuaG","boolean-field":"events-registration-client-styles-___regform-module__boolean-field___0geJs","date-field":"events-registration-client-styles-___regform-module__date-field___LToLh","file-field":"events-registration-client-styles-___regform-module__file-field___1Nup7","accommodation-field":"events-registration-client-styles-___regform-module__accommodation-field___WHQ+0","date-picker":"events-registration-client-styles-___regform-module__date-picker___zVaWU","accompanyingpersons-field":"events-registration-client-styles-___regform-module__accompanyingpersons-field___MUvS6",light:"events-registration-client-styles-___regform-module__light___gdy5g",summary:"events-registration-client-styles-___regform-module__summary___Krn7Y","country-dropdown":"events-registration-client-styles-___regform-module__country-dropdown___Hhf-Y","single-choice-dropdown":"events-registration-client-styles-___regform-module__single-choice-dropdown___tzmJ5","dropdown-text":"events-registration-client-styles-___regform-module__dropdown-text___GB4OB",caption:"events-registration-client-styles-___regform-module__caption___u54ZN",labels:"events-registration-client-styles-___regform-module__labels___Zy8f7","single-choice-radio-group":"events-registration-client-styles-___regform-module__single-choice-radio-group___E9qIt",description:"events-registration-client-styles-___regform-module__description___abkAU",editable:"events-registration-client-styles-___regform-module__editable___ZHQMz","sortable-handle":"events-registration-client-styles-___regform-module__sortable-handle___yz1-x","header-wrapper":"events-registration-client-styles-___regform-module__header-wrapper___U6gJN","section-sortable-handle":"events-registration-client-styles-___regform-module__section-sortable-handle___ABMeH","manager-only":"events-registration-client-styles-___regform-module__manager-only___PQwvG","section-actions":"events-registration-client-styles-___regform-module__section-actions___p3bRe","dropdown-menu":"events-registration-client-styles-___regform-module__dropdown-menu___9uq+D","dropdown-item":"events-registration-client-styles-___regform-module__dropdown-item___chpZW"}};function ni(e){let{id:t,value:i,onChange:a,disabled:r,required:s,isPurged:l,price:d,placesLimit:c,placesUsed:m}=e;const u=(0,Y.useSelector)(X),_=(0,Y.useSelector)((e=>Rt(e,t))),p=e=>()=>{a(i!==e||s?e:null)};return n.createElement("div",{className:"events-registration-client-styles-___regform-module__boolean-field___0geJs"},n.createElement(Nt.A.Group,null,n.createElement(Nt.A,{type:"button",active:!l&&!0===i,disabled:r||c>0&&m>=c&&!_,onClick:p(!0)},n.createElement(o.Translate,null,"Yes")),n.createElement(Nt.A,{type:"button",active:!l&&!1===i,disabled:r,onClick:p(!1)},n.createElement(o.Translate,null,"No"))),!!d&&n.createElement(F.A,{pointing:"left",className:(0,gt.A)("price-tag "+(!0!==i?"greyed":""),ii,{autoResolveMultipleImports:!0,handleMissingStyleName:"throw"})},d.toFixed(2)," ",u),!!c&&n.createElement("div",{style:{marginLeft:"1em"}},n.createElement(Vt,{placesLimit:c,placesUsed:m,isEnabled:!r})))}function ai(e){let{id:t,htmlName:i,disabled:a,isRequired:r,isPurged:s,price:l,placesLimit:d,placesUsed:c}=e;return n.createElement(u.FinalField,{id:t,name:i,component:ni,required:r?"no-validator":r,validate:e=>{if(r&&null===e)return o.Translate.string("This field is required.")},disabled:a,isPurged:s,allowNull:!0,price:l,placesLimit:d,placesUsed:c})}ni.propTypes={id:l().number.isRequired,value:l().bool,onChange:l().func.isRequired,disabled:l().bool.isRequired,required:l().bool.isRequired,isPurged:l().bool.isRequired,price:l().number.isRequired,placesLimit:l().number.isRequired,placesUsed:l().number.isRequired},ni.defaultProps={value:null},ai.propTypes={id:l().number.isRequired,htmlName:l().string.isRequired,disabled:l().bool,isRequired:l().bool,isPurged:l().bool.isRequired,price:l().number,placesLimit:l().number,placesUsed:l().number},ai.defaultProps={disabled:!1,isRequired:!1,price:0,placesLimit:0,placesUsed:0};const ri={styles:{"setup-toolbar":"events-registration-client-styles-___regform-module__setup-toolbar___tu1Kv","disabled-sections":"events-registration-client-styles-___regform-module__disabled-sections___TthNB",actions:"events-registration-client-styles-___regform-module__actions___yuXgO","form-item":"events-registration-client-styles-___regform-module__form-item___AlbiE",disabled:"events-registration-client-styles-___regform-module__disabled___A4p+q",content:"events-registration-client-styles-___regform-module__content___dKw31","paid-disabled":"events-registration-client-styles-___regform-module__paid-disabled___e8zT-","purged-disabled":"events-registration-client-styles-___regform-module__purged-disabled___oo16L",label:"events-registration-client-styles-___regform-module__label___t11lD",field:"events-registration-client-styles-___regform-module__field___mpG7J","price-tag":"events-registration-client-styles-___regform-module__price-tag___pz3tt","places-left":"events-registration-client-styles-___regform-module__places-left___6O4Ev",greyed:"events-registration-client-styles-___regform-module__greyed___HZLen","number-field":"events-registration-client-styles-___regform-module__number-field___LtuaG","boolean-field":"events-registration-client-styles-___regform-module__boolean-field___0geJs","date-field":"events-registration-client-styles-___regform-module__date-field___LToLh","file-field":"events-registration-client-styles-___regform-module__file-field___1Nup7","accommodation-field":"events-registration-client-styles-___regform-module__accommodation-field___WHQ+0","date-picker":"events-registration-client-styles-___regform-module__date-picker___zVaWU","accompanyingpersons-field":"events-registration-client-styles-___regform-module__accompanyingpersons-field___MUvS6",light:"events-registration-client-styles-___regform-module__light___gdy5g",summary:"events-registration-client-styles-___regform-module__summary___Krn7Y","country-dropdown":"events-registration-client-styles-___regform-module__country-dropdown___Hhf-Y","single-choice-dropdown":"events-registration-client-styles-___regform-module__single-choice-dropdown___tzmJ5","dropdown-text":"events-registration-client-styles-___regform-module__dropdown-text___GB4OB",caption:"events-registration-client-styles-___regform-module__caption___u54ZN",labels:"events-registration-client-styles-___regform-module__labels___Zy8f7","single-choice-radio-group":"events-registration-client-styles-___regform-module__single-choice-radio-group___E9qIt",description:"events-registration-client-styles-___regform-module__description___abkAU",editable:"events-registration-client-styles-___regform-module__editable___ZHQMz","sortable-handle":"events-registration-client-styles-___regform-module__sortable-handle___yz1-x","header-wrapper":"events-registration-client-styles-___regform-module__header-wrapper___U6gJN","section-sortable-handle":"events-registration-client-styles-___regform-module__section-sortable-handle___ABMeH","manager-only":"events-registration-client-styles-___regform-module__manager-only___PQwvG","section-actions":"events-registration-client-styles-___regform-module__section-actions___p3bRe","dropdown-menu":"events-registration-client-styles-___regform-module__dropdown-menu___9uq+D","dropdown-item":"events-registration-client-styles-___regform-module__dropdown-item___chpZW"}};function si(e){let{id:t,htmlId:i,htmlName:a,disabled:r,title:s,isRequired:l,showAsRequired:o,price:d,placesLimit:c,placesUsed:m,retentionPeriodIcon:_}=e;const p=(0,Y.useSelector)(X),g=(0,Y.useSelector)((e=>Rt(e,t))),y=`${i}-checkbox`;return n.createElement(u.FinalCheckbox,{id:y,fieldProps:{className:`${ot} ${o?"required":""}`},name:a,label:s,disabled:r||c>0&&m>=c&&!g,required:l},_,!!d&&n.createElement(nt.Field,{name:a,subscription:{value:!0}},(e=>{let{input:{value:t}}=e;return n.createElement(F.A,{pointing:"left",className:(0,gt.A)("price-tag "+(t?"":"greyed"),ri,{autoResolveMultipleImports:!0,handleMissingStyleName:"throw"})},d.toFixed(2)," ",p)})),!!c&&n.createElement("div",{style:{marginLeft:"1em",display:"inline-block"}},n.createElement(Vt,{placesLimit:c,placesUsed:m,isEnabled:!r})))}si.propTypes={id:l().number.isRequired,htmlId:l().string.isRequired,htmlName:l().string.isRequired,disabled:l().bool,title:l().string.isRequired,isRequired:l().bool.isRequired,showAsRequired:l().bool.isRequired,price:l().number,placesLimit:l().number.isRequired,placesUsed:l().number.isRequired,retentionPeriodIcon:l().element},si.defaultProps={disabled:!1,price:0,retentionPeriodIcon:null};const li=e=>String.fromCodePoint(...e.split("").map((e=>e.charCodeAt()+127397)));function oi(e){let{value:t,onChange:i,disabled:a,choices:r,clearable:s}=e;return n.createElement(q.A,{className:"events-registration-client-styles-___regform-module__country-dropdown___Hhf-Y",placeholder:o.Translate.string("Select a country"),fluid:!0,search:!0,selection:!0,selectOnBlur:!1,selectOnNavigation:!1,disabled:a,clearable:s,value:t,onChange:(e,t)=>{let{value:n=""}=t;return i(n)},options:r.map((e=>({key:e.countryKey,value:e.countryKey,text:`${li(e.countryKey)} ${e.caption}`})))})}function di(e){let{htmlId:t,htmlName:i,disabled:a,isRequired:r,choices:s}=e;return n.createElement(u.FinalField,{id:t,name:i,component:oi,required:r,disabled:a,choices:s,clearable:!r,parse:e=>e})}function ci(e){let{htmlName:t}=e;const{hasPredefinedAffiliations:i}=(0,Y.useSelector)(Z);return"country"===t&&i?n.createElement(u.FinalCheckbox,{name:"useAffiliationCountry",label:o.Translate.string("Default to affiliation country")}):null}oi.propTypes={value:l().string.isRequired,onChange:l().func.isRequired,disabled:l().bool.isRequired,choices:l().arrayOf(l().objectOf(l().string)).isRequired,clearable:l().bool.isRequired},di.propTypes={htmlId:l().string.isRequired,htmlName:l().string.isRequired,disabled:l().bool,isRequired:l().bool,choices:l().arrayOf(l().objectOf(l().string)).isRequired},di.defaultProps={disabled:!1,isRequired:!1},ci.propTypes={htmlName:l().string.isRequired};var mi=i(72641),ui=i(82050),_i=i(7305);function pi(){pi=function(e,t){return new i(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function i(e,n,a){var r=new RegExp(e,n);return t.set(r,a||t.get(e)),(0,ui.A)(r,i.prototype)}function n(e,i){var n=t.get(i);return Object.keys(n).reduce((function(t,i){var a=n[i];if("number"==typeof a)t[i]=e[a];else{for(var r=0;void 0===e[a[r]]&&r+1<a.length;)r++;t[i]=e[a[r]]}return t}),Object.create(null))}return(0,mi.A)(i,RegExp),i.prototype.exec=function(t){var i=e.exec.call(this,t);if(i){i.groups=n(i,this);var a=i.indices;a&&(a.groups=n(a,this))}return i},i.prototype[Symbol.replace]=function(i,a){if("string"==typeof a){var r=t.get(this);return e[Symbol.replace].call(this,i,a.replace(/\$<([^>]+)>/g,(function(e,t){var i=r[t];return"$"+(Array.isArray(i)?i.join("$"):i)})))}if("function"==typeof a){var s=this;return e[Symbol.replace].call(this,i,(function(){var e=arguments;return"object"!=typeof e[e.length-1]&&(e=[].slice.call(e)).push(n(e,s)),a.apply(this,e)}))}return e[Symbol.replace].call(this,i,a)},pi.apply(this,arguments)}function gi(e){let{id:t,value:i,onChange:a,disabled:r,required:s,dateFormat:l,timeFormat:o}=e;const d=i.split("T")[0],c=i.includes("T")?i.split("T")[1]:"";return n.createElement(yt.A.Group,{className:"events-registration-client-styles-___regform-module__date-field___LToLh"},n.createElement(yt.A.Field,null,n.createElement(M.SingleDatePicker,{id:t,name:"date",disabled:r,required:s,date:(0,Ct.toMoment)(d,"YYYY-MM-DD",!0),onDateChange:e=>{const t=e?e.toISOString().split("T")[0]:"";a(`${t}T${o?c:"00:00:00"}`)},placeholder:l,displayFormat:l,isOutsideRange:()=>!1,verticalSpacing:10,enableOutsideDays:!0})),o&&n.createElement(yt.A.Field,null,n.createElement(_i.A,{id:t,name:"time",disabled:r,required:s,showSecond:!1,value:(0,Ct.toMoment)(c,"HH:mm:ss",!0),focusOnOpen:!0,onChange:e=>a(e?`${d}T${e.format("HH:mm:00")}`:d),use12Hours:"12h"===o,allowEmpty:!1,placeholder:"12h"===o?"--:-- am/pm":"--:--",getPopupContainer:e=>e})))}function yi(e){let{htmlId:t,htmlName:i,disabled:a,isRequired:r,dateFormat:s,timeFormat:l}=e;const d=s.replace(/%([HMdmY])/g,((e,t)=>({H:"HH",M:"mm",d:"DD",m:"MM",Y:"YYYY"}[t]))),c=e=>{if(e&&!e.match(/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:00(.*)/))return o.Translate.string("The provided date is invalid.")};if(s.includes("%d"))return n.createElement(u.FinalField,{id:t,name:i,component:gi,required:r,disabled:a,dateFormat:d,timeFormat:l,validate:c});{const e=e=>{var t;if(!e)return e;const i={"%m/%Y":pi(/^(\d{2})\/(\d{4})$/,{month:1,year:2}),"%m.%Y":pi(/^(\d{2})\.(\d{4})$/,{month:1,year:2}),"%Y":pi(/^(\d{4})$/,{year:1})}[s].exec(e),n=i?`${i.groups.year}-${null!==(t=i.groups.month)&&void 0!==t?t:"01"}-01T00:00:00`:e;try{return(0,Ct.toMoment)(n,"YYYY-MM-DDTHH:mm:ss",!0),n}catch(t){return e}},l=e=>{if(!e||!e.includes("T"))return e;try{return(0,Ct.toMoment)(e,"YYYY-MM-DDTHH:mm:ss",!0).format(d)}catch(t){return e}};return n.createElement(u.FinalField,{id:t,type:"text",name:i,component:kt.A,required:r,disabled:a,placeholder:d,parse:e,format:l,validate:c})}}gi.propTypes={id:l().string.isRequired,value:l().string.isRequired,onChange:l().func.isRequired,disabled:l().bool.isRequired,required:l().bool.isRequired,dateFormat:l().oneOf(["DD/MM/YYYY","DD.MM.YYYY","MM/DD/YYYY","MM.DD.YYYY","YYYY/MM/DD","YYYY.MM.DD","MM/YYYY","MM.YYYY","YYYY"]).isRequired,timeFormat:l().oneOf(["12h","24h"])},gi.defaultProps={timeFormat:null},yi.propTypes={htmlId:l().string.isRequired,htmlName:l().string.isRequired,disabled:l().bool,isRequired:l().bool,dateFormat:l().oneOf(["%d/%m/%Y","%d.%m.%Y","%m/%d/%Y","%m.%d.%Y","%Y/%m/%d","%Y.%m.%d","%m/%Y","%m.%Y","%Y"]).isRequired,timeFormat:l().oneOf(["12h","24h"])},yi.defaultProps={disabled:!1,isRequired:!1,timeFormat:null};const fi=(0,jt.A)({field:"dateFormat",updates:e=>e.includes("%d")?{}:{timeFormat:null}});var bi=i(87597);const vi=r.Ay.bind(null,{endpoint:"event_registration.check_email",rules:[{args:["event_id","reg_form_id"],converters:{event_id:"IntegerConverter",reg_form_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"registrations",isDynamic:!1},{data:"/",isDynamic:!1},{data:"reg_form_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"check-email",isDynamic:!1}]}]},"/");function hi(e){let{htmlId:t,htmlName:i,disabled:a,isRequired:r}=e;const s="email"===i,[l,d]=(0,n.useState)({status:"",message:"",forEmail:""}),c=(0,Y.useSelector)(vt),{eventId:m,regformId:g,registrationUuid:y,management:f}=(0,Y.useSelector)(Z),b=(0,n.useMemo)((()=>new URLSearchParams(location.search).get("invitation")),[]),v=(0,n.useMemo)((()=>{const e={event_id:m,reg_form_id:g};return b&&(e.invitation=b),vi(e)}),[m,g,b]),h=(0,_.vJ)((async e=>{let t,i;if(!(e=e.trim()))return t=o.Translate.string("This field is required."),d({status:"error",forEmail:e,message:t}),t;d({status:"",forEmail:e,message:o.Translate.string("Checking email address...")});try{i=await p.indicoAxios.get(v,{params:c?{email:e,management:f,update:y}:{email:e,management:f}})}catch(e){return(0,p.handleAxiosError)(e)}const a=i.data,r=a.user?$("<span>",{text:a.user}).html():null;return t="email-already-registered"===a.conflict?o.Translate.string("There is already a registration with this email address."):"user-already-registered"===a.conflict?o.Translate.string("The user associated with this email address is already registered."):"no-user"===a.conflict?o.Translate.string("There is no Indico user associated with this email address."):"error"!==a.status||"email-other-user"!==a.conflict&&"email-no-user"!==a.conflict?"email-other-user"===a.conflict?n.createElement(o.Translate,null,"The registration will be re-associated to a different user (",n.createElement(o.Param,{name:"name",wrapper:n.createElement("strong",null),value:r}),")."):"email-no-user"===a.conflict?n.createElement(o.Translate,null,"The registration will be disassociated from the current user (",n.createElement(o.Param,{name:"name",wrapper:n.createElement("strong",null),value:r}),")."):"email-invalid"===a.conflict?"undeliverable"===a.email_error?o.Translate.string("The domain used in the email address does not exist."):o.Translate.string("This email address is invalid."):a.user?a.self?o.Translate.string("The registration will be associated with your Indico account."):a.same?n.createElement(o.Translate,null,"The registration will remain associated with the Indico account"," ",n.createElement(o.Param,{name:"name",wrapper:n.createElement("strong",null),value:r}),"."):n.createElement(o.Translate,null,"The registration will be associated with the Indico account"," ",n.createElement(o.Param,{name:"name",wrapper:n.createElement("strong",null),value:r}),"."):o.Translate.string("The registration will not be associated with any Indico account."):o.Translate.string("This email address is not associated with your Indico account."),d({status:a.status,message:t,forEmail:e}),"error"===a.status?t:void 0}),250);return n.createElement(u.FinalInput,{type:"email",id:t,name:i,required:r&&s?"no-validator":r,disabled:a,validate:s?h:r?u.validators.required:void 0,hideValidationError:!(!s||"error"!==l.status||!l.forEmail)&&"message",loaderWhileValidating:!0},s&&!!l.forEmail&&!!l.message&&n.createElement(bi.A,{visible:!0,warning:"warning"===l.status,error:"error"===l.status,positive:"ok"===l.status},l.message))}hi.propTypes={htmlId:l().string.isRequired,htmlName:l().string.isRequired,disabled:l().bool,isRequired:l().bool.isRequired},hi.defaultProps={disabled:!1};const Di=r.Ay.bind(null,{endpoint:"event_registration.upload_registration_file",rules:[{args:["event_id","reg_form_id"],converters:{event_id:"IntegerConverter",reg_form_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"registrations",isDynamic:!1},{data:"/",isDynamic:!1},{data:"reg_form_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"upload",isDynamic:!1}]}]},"/");function Ei(e){let{htmlName:t,disabled:i,isRequired:a}=e;const{eventId:r,regformId:s,registrationUuid:l,fileData:o}=(0,Y.useSelector)(Z),d=(0,Y.useSelector)(vt)&&o[t]||null,c={event_id:r,reg_form_id:s};return l&&(c.token=l),n.createElement("div",{className:"events-registration-client-styles-___regform-module__file-field___1Nup7"},n.createElement(M.FinalSingleFileManager,{name:t,disabled:i,required:a,uploadURL:Di(c),initialFileDetails:d}))}function Ti(e){let{title:t}=e;return n.createElement("div",{className:"events-registration-client-styles-___regform-module__label___t11lD"},t)}Ei.propTypes={htmlName:l().string.isRequired,disabled:l().bool,isRequired:l().bool},Ei.defaultProps={disabled:!1,isRequired:!1},Ti.propTypes={title:l().string.isRequired};var wi=i(38420),qi=i.n(wi),Ri=i(95355),Oi=i.n(Ri),Pi=i(91185);function xi(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Ai(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?xi(Object(i),!0).forEach((function(t){(0,H.A)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):xi(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Ii(e){let{id:t,existingValue:i,value:a,onChange:r,onFocus:s,onBlur:l,disabled:d,choices:c,withExtraSlots:m,placesUsed:u}=e;const _=(0,Y.useSelector)(Tt),p=(0,Y.useSelector)(Et),g=(0,Y.useSelector)(X),y=()=>{s(),l()},f=e=>()=>{y(),a[e.id]?r(We()(a,e.id)):r(Ai(Ai({},a),{},{[e.id]:+!a[e.id]}))},b=e=>(t,i)=>{let{value:n}=i;y(),r(+n?Ai(Ai({},a),{},{[e.id]:+n}):We()(a,e.id))},v=e=>{const t=a[e.id]||0;return((0===t?0:e.extraSlotsPay?t:1)*e.price).toFixed(2)},h=e=>e.price>0&&_,D=e=>!p&&h(e);return n.createElement("table",{className:"events-registration-client-js-form-fields-___table-module__choice-table___nw5lF",role:"presentation"},n.createElement("tbody",null,c.map(((e,r)=>n.createElement("tr",{key:e.id,className:"events-registration-client-js-form-fields-___table-module__row___kh-Ns"},n.createElement("td",null,n.createElement(Pi.A,{id:t?`${t}-${r}`:"",className:"events-registration-client-js-form-fields-___table-module__checkbox___7FyHh",style:{pointerEvents:"auto"},value:e.id,disabled:!e.isEnabled||d||D(e)||e.placesLimit>0&&(u[e.id]||0)>=e.placesLimit&&!i[e.id],checked:!!a[e.id],onChange:f(e),label:{children:n.createElement(St,{choice:e,management:p,paid:h(e)})}})),n.createElement("td",null,e.isEnabled&&!!e.price&&n.createElement(F.A,{pointing:"left"},e.price.toFixed(2)," ",g)),n.createElement("td",null,0===e.placesLimit?null:n.createElement(Vt,{placesLimit:e.placesLimit,placesUsed:u[e.id]||0,isEnabled:!d&&e.isEnabled&&!D(e)})),m&&n.createElement("td",null,e.isEnabled&&n.createElement(q.A,{selection:!0,className:"events-registration-client-js-form-fields-___table-module__dropdown___EZd1Q",disabled:d||D(e)||e.placesLimit>0&&(u[e.id]||0)-(i[e.id]||0)>=e.placesLimit,value:a[e.id]||0,onChange:b(e),options:Oi()(0,e.maxExtraSlots+2).map((t=>({key:t,value:t,text:t,disabled:e.placesLimit>0&&(u[e.id]||0)-(i[e.id]||0)+t>e.placesLimit})))})),m&&n.createElement("td",null,e.isEnabled&&!!e.price&&n.createElement(F.A,{pointing:"left"},o.Translate.string("Total: {total} {currency}",{total:v(e),currency:g}))))))))}function Ci(e){let{id:t,htmlId:i,htmlName:a,disabled:r,isRequired:s,choices:l,maxChoices:d,withExtraSlots:c,placesUsed:m}=e;const _=(0,Y.useSelector)((e=>Rt(e,t)))||{};return n.createElement(u.FinalField,{id:i,name:a,component:Ii,required:s,disabled:r,choices:l,withExtraSlots:c,placesUsed:m,existingValue:_,isEqual:xt(),validate:e=>{if(d&&qi()(e).length>d)return o.PluralTranslate.string("At most {n} option can be selected","At most {n} options can be selected",d,{n:d})}})}Ii.propTypes={id:l().string.isRequired,value:l().object.isRequired,onChange:l().func.isRequired,onFocus:l().func.isRequired,onBlur:l().func.isRequired,disabled:l().bool.isRequired,choices:l().arrayOf(l().shape(Yt)).isRequired,withExtraSlots:l().bool.isRequired,placesUsed:l().objectOf(l().number).isRequired,existingValue:l().objectOf(l().number).isRequired},Ci.propTypes={id:l().number.isRequired,htmlId:l().string.isRequired,htmlName:l().string.isRequired,disabled:l().bool,isRequired:l().bool,choices:l().arrayOf(l().shape(Yt)).isRequired,maxChoices:l().number,withExtraSlots:l().bool,placesUsed:l().objectOf(l().number).isRequired},Ci.defaultProps={disabled:!1,isRequired:!1,maxChoices:null,withExtraSlots:!1};function Si(e){let{id:t,value:i,onChange:a,disabled:r,price:s,minValue:l,maxValue:o}=e;const d=(0,Y.useSelector)(X),c=(i*s).toFixed(2);return n.createElement("div",{className:"events-registration-client-styles-___regform-module__number-field___LtuaG"},n.createElement("input",{id:t,type:"number",value:null!==i?i:"",min:l,max:o||void 0,disabled:r,onChange:e=>a(e.target.value?+e.target.value:null)}),!!s&&n.createElement(F.A,{pointing:"left",className:"events-registration-client-styles-___regform-module__price-tag___pz3tt"},s.toFixed(2)," ",d," (Total: ",c," ",d,")"))}function ji(e){let{htmlId:t,htmlName:i,disabled:a,isRequired:r,price:s,minValue:l,maxValue:o}=e;const d=r?u.validators.chain(u.validators.required,u.validators.number(),u.validators.range(l,o||1/0)):u.validators.chain(u.validators.optional(),u.validators.number(),u.validators.range(l,o||1/0));return n.createElement(u.FinalField,{id:t,name:i,component:Si,required:r,disabled:a,allowNull:!0,price:s,minValue:l,maxValue:o,parse:u.parsers.number,validate:d})}function Fi(e){let{htmlId:t,htmlName:i,isRequired:a,disabled:r}=e;return n.createElement(u.FinalInput,{id:t,type:"tel",name:i,required:a,disabled:r})}Si.propTypes={id:l().string.isRequired,value:l().number,onChange:l().func.isRequired,disabled:l().bool.isRequired,price:l().number.isRequired,minValue:l().number.isRequired,maxValue:l().number},Si.defaultProps={value:null,maxValue:null},ji.propTypes={htmlId:l().string.isRequired,htmlName:l().string.isRequired,disabled:l().bool,isRequired:l().bool,price:l().number,minValue:l().number,maxValue:l().number},ji.defaultProps={disabled:!1,isRequired:!1,price:0,minValue:0,maxValue:0},Fi.propTypes={htmlId:l().string.isRequired,htmlName:l().string.isRequired,isRequired:l().bool.isRequired,disabled:l().bool},Fi.defaultProps={disabled:!1};const Ni=r.Ay.bind(null,{endpoint:"event_registration.manage_registration_file",rules:[{args:["event_id","field_data_id","filename","reg_form_id","registration_id"],converters:{event_id:"IntegerConverter",field_data_id:"IntegerConverter",reg_form_id:"IntegerConverter",registration_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"registration",isDynamic:!1},{data:"/",isDynamic:!1},{data:"reg_form_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"registrations",isDynamic:!1},{data:"/",isDynamic:!1},{data:"registration_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"file",isDynamic:!1},{data:"/",isDynamic:!1},{data:"field_data_id",isDynamic:!0},{data:"-",isDynamic:!1},{data:"filename",isDynamic:!0}]}]},"/"),ki=r.Ay.bind(null,{endpoint:"event_registration.registration_picture",rules:[{args:["event_id","field_data_id","filename","reg_form_id","registration_id"],converters:{event_id:"IntegerConverter",field_data_id:"IntegerConverter",reg_form_id:"IntegerConverter",registration_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"registrations",isDynamic:!1},{data:"/",isDynamic:!1},{data:"reg_form_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"registration_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"picture",isDynamic:!1},{data:"/",isDynamic:!1},{data:"field_data_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"filename",isDynamic:!0}]}]},"/"),Mi=r.Ay.bind(null,{endpoint:"event_registration.upload_registration_file",rules:[{args:["event_id","reg_form_id"],converters:{event_id:"IntegerConverter",reg_form_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"registrations",isDynamic:!1},{data:"/",isDynamic:!1},{data:"reg_form_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"upload",isDynamic:!1}]}]},"/");function Li(e){let{htmlName:t,disabled:i,isRequired:a,minPictureSize:r}=e;const{eventId:s,regformId:l,registrationUuid:o,fileData:d}=(0,Y.useSelector)(Z),c=d&&d[t]||null,m=(0,Y.useSelector)(Et)?Ni:ki,u={event_id:s,reg_form_id:l};o&&(u.token=o);const _=c?c.locator:null;return n.createElement("div",{className:"events-registration-client-styles-___regform-module__file-field___1Nup7"},n.createElement(M.FinalPictureManager,{name:t,disabled:i,required:a,uploadURL:Mi(u),previewURL:_?m(_):"",initialPictureDetails:c,minPictureSize:r}))}function Ui(e){let{id:t,existingValue:i,value:a,onChange:r,disabled:s,isRequired:l,isPurged:d,choices:c,withExtraSlots:m,placesUsed:u}=e;const _=(0,Y.useSelector)(Tt),p=(0,Y.useSelector)(Et),g=(0,Y.useSelector)(X),y=c.find((e=>e.id in a))||{},f=e=>e.price>0&&_,b=e=>!p&&f(e);let v=null;if(m&&y&&y.maxExtraSlots>0){const e=Oi()(1,y.maxExtraSlots+2).map((e=>({key:e,value:e,text:e,disabled:y.placesLimit>0&&(u[y.id]||0)-(i[y.id]||0)+e>y.placesLimit})));v=n.createElement(yt.A.Select,{id:t?`${t}-extraslots`:"",options:e,disabled:s||b(y)||y.placesLimit>0&&(u[y.id]||0)-(i[y.id]||0)>=y.placesLimit,value:a[y.id],onChange:(e,t)=>r({[y.id]:t.value}),fluid:!0})}const h=c.map((e=>({key:e.id,value:e.id,disabled:!e.isEnabled||b(e)||e.placesLimit>0&&(u[e.id]||0)>=e.placesLimit&&!i[e.id],text:e.caption,content:n.createElement("div",{className:"events-registration-client-styles-___regform-module__dropdown-text___GB4OB"},n.createElement("div",{className:"events-registration-client-styles-___regform-module__caption___u54ZN"},n.createElement(St,{choice:e,management:p,paid:f(e)})),n.createElement("div",{className:"events-registration-client-styles-___regform-module__labels___Zy8f7"},!!e.price&&n.createElement(F.A,null,e.price," ",g),0===e.placesLimit?null:n.createElement(Vt,{placesLimit:e.placesLimit,placesUsed:u[e.id]||0,isEnabled:e.isEnabled})))})));return n.createElement(yt.A.Group,{className:"events-registration-client-styles-___regform-module__single-choice-dropdown___tzmJ5"},n.createElement(yt.A.Field,null,n.createElement(q.A,{id:t,selection:!0,style:{width:500,opacity:1},placeholder:o.Translate.string("Choose an option"),options:h,disabled:s,value:!d&&y.id||"",onChange:(e,t)=>r(t.value?{[t.value]:1}:{}),clearable:!l,search:!0,selectOnNavigation:!1,selectOnBlur:!1})),v,v&&!!y.price&&n.createElement(F.A,{pointing:"left"},o.Translate.string("Total: {total} {currency}",{total:((y.extraSlotsPay?a[y.id]:1)*y.price).toFixed(2),currency:g})))}function Yi(e){let{id:t,existingValue:i,value:a,onChange:r,disabled:s,isRequired:l,isPurged:d,choices:c,withExtraSlots:m,placesUsed:u}=e;const _=(0,Y.useSelector)(Tt),p=(0,Y.useSelector)(Et),g=(0,Y.useSelector)(X),y=c.find((e=>e.id in a))||{id:""},f=[...c];l||f.unshift({id:"",isEnabled:!0,caption:o.Translate.string("None")});const b=e=>e.price>0&&_,v=e=>!p&&b(e);return n.createElement("table",{className:"events-registration-client-js-form-fields-___table-module__choice-table___nw5lF",role:"presentation"},n.createElement("tbody",null,f.map(((e,l)=>{return n.createElement("tr",{key:e.id,className:"events-registration-client-js-form-fields-___table-module__row___kh-Ns"},n.createElement("td",null,n.createElement(yt.A.Radio,{id:t?`${t}-${l}`:"",style:{pointerEvents:"auto"},className:"events-registration-client-js-form-fields-___table-module__radio___wfFj9",label:{children:n.createElement(St,{choice:e,management:p,paid:b(e)})},key:e.id,value:e.id,disabled:!e.isEnabled||s||v(e)||e.placesLimit>0&&(u[e.id]||0)-(i[e.id]||0)>=e.placesLimit,checked:!d&&(c=e,c.id===y.id),onChange:()=>{return t=e.id,void r(""===t?{}:{[t]:1});var t}})),n.createElement("td",null,e.isEnabled&&!!e.price&&n.createElement(F.A,{pointing:"left"},e.price.toFixed(2)," ",g)),n.createElement("td",null,""!==e.id&&0!==e.placesLimit&&n.createElement(Vt,{placesLimit:e.placesLimit,placesUsed:u[e.id]||0,isEnabled:!s&&e.isEnabled&&!v(e)})),m&&!!e.maxExtraSlots&&y.id===e.id&&n.createElement(n.Fragment,null,n.createElement("td",null,e.isEnabled&&n.createElement(q.A,{id:t?`${t}-extraslot`:"",selection:!0,className:"events-registration-client-js-form-fields-___table-module__dropdown___EZd1Q",disabled:s||v(e)||e.placesLimit>0&&(u[e.id]||0)-(i[e.id]||0)>=e.placesLimit,value:a[y.id],onChange:(e,t)=>r({[y.id]:t.value}),options:Oi()(1,e.maxExtraSlots+2).map((e=>({key:e,value:e,text:e,disabled:y.placesLimit>0&&(u[y.id]||0)-(i[y.id]||0)+e>y.placesLimit})))})),n.createElement("td",null,e.isEnabled&&!!e.price&&n.createElement(F.A,{pointing:"left"},o.Translate.string("Total: {total} {currency}",{total:(a[y.id]*e.price).toFixed(2),currency:g})))));var c}))))}function $i(e){let{id:t,existingValue:i,value:a,onChange:r,disabled:s,isRequired:l,isPurged:o,itemType:d,choices:c,withExtraSlots:m,placesUsed:u}=e,_=null;if("dropdown"===d)_=n.createElement(Ui,{id:t,value:a,existingValue:i,onChange:r,disabled:s,isRequired:l,isPurged:o,choices:c,withExtraSlots:m,placesUsed:u});else{if("radiogroup"!==d)return`ERROR: Unknown type ${d}`;_=n.createElement(Yi,{id:t,value:a,existingValue:i,onChange:r,disabled:s,isRequired:l,isPurged:o,choices:c,withExtraSlots:m,placesUsed:u})}return _}function zi(e){let{id:t,htmlId:i,htmlName:a,disabled:r,isRequired:s,isPurged:l,itemType:d,choices:c,withExtraSlots:m,placesUsed:_}=e;const p=(0,Y.useSelector)((e=>Rt(e,t)))||{};return n.createElement(u.FinalField,{id:i,name:a,component:$i,format:e=>e||{},required:s,isRequired:s,validate:e=>!s||e&&Object.keys(e).length?void 0:o.Translate.string("This field is required."),disabled:r,isPurged:l,itemType:d,choices:c,withExtraSlots:m,placesUsed:_,existingValue:p,isEqual:xt()})}Li.propTypes={htmlName:l().string.isRequired,disabled:l().bool,isRequired:l().bool,minPictureSize:l().number},Li.defaultProps={disabled:!1,isRequired:!1,minPictureSize:null},Ui.propTypes={id:l().string.isRequired,value:l().object.isRequired,onChange:l().func.isRequired,disabled:l().bool.isRequired,isRequired:l().bool.isRequired,isPurged:l().bool.isRequired,choices:l().arrayOf(l().shape(Yt)).isRequired,withExtraSlots:l().bool.isRequired,placesUsed:l().objectOf(l().number).isRequired,existingValue:l().objectOf(l().number).isRequired},Yi.propTypes={id:l().string.isRequired,value:l().object.isRequired,onChange:l().func.isRequired,disabled:l().bool.isRequired,isRequired:l().bool.isRequired,isPurged:l().bool.isRequired,choices:l().arrayOf(l().shape(Yt)).isRequired,withExtraSlots:l().bool.isRequired,placesUsed:l().objectOf(l().number).isRequired,existingValue:l().objectOf(l().number).isRequired},$i.propTypes={id:l().string.isRequired,disabled:l().bool.isRequired,isRequired:l().bool.isRequired,isPurged:l().bool.isRequired,itemType:l().oneOf(["dropdown","radiogroup"]).isRequired,choices:l().arrayOf(l().shape(Yt)).isRequired,withExtraSlots:l().bool.isRequired,placesUsed:l().objectOf(l().number).isRequired,existingValue:l().objectOf(l().number).isRequired},zi.propTypes={id:l().number.isRequired,htmlId:l().string.isRequired,htmlName:l().string.isRequired,disabled:l().bool,isRequired:l().bool,isPurged:l().bool.isRequired,itemType:l().oneOf(["dropdown","radiogroup"]).isRequired,choices:l().arrayOf(l().shape(Yt)).isRequired,withExtraSlots:l().bool,placesUsed:l().objectOf(l().number).isRequired},zi.defaultProps={disabled:!1,isRequired:!1,withExtraSlots:!1};const Hi=(0,jt.A)({field:"choices",updates:(e,t,i)=>{let{defaultItem:n}=i;return e.some((e=>e.id===n&&e.isEnabled))?{}:{defaultItem:null}}});function Vi(e,t,i){const n={};return Object.entries(t).forEach((t=>{let[a,r]=t;const s=e[a];null===s&&a in i?n[r]=i[a]:s>0&&(n[r]=s)})),n}const Bi=["htmlId","htmlName","disabled","title","isRequired"],Ji={numberOfRows:"rows"};function Gi(e){let{htmlId:t,htmlName:i,disabled:a,title:r,isRequired:s}=e;const l=Vi((0,w.A)(e,Bi),Ji,Gi.defaultProps);return n.createElement(u.FinalTextArea,(0,T.A)({id:t,name:i},l,{disabled:a,required:s,style:{resize:"none"}}))}Gi.propTypes={htmlId:l().string.isRequired,htmlName:l().string.isRequired,disabled:l().bool,numberOfRows:l().number,title:l().string.isRequired,isRequired:l().bool.isRequired},Gi.defaultProps={disabled:!1,numberOfRows:2};const Zi=["htmlId","htmlName","disabled","title","isRequired"],Ki={minLength:"minLength",maxLength:"maxLength"};function Wi(e){let{htmlId:t,htmlName:i,disabled:a,title:r,isRequired:s}=e;const l=Vi((0,w.A)(e,Zi),Ki,Wi.defaultProps);return n.createElement(u.FinalInput,(0,T.A)({id:t,type:"text",name:i},l,{required:s,disabled:a}))}Wi.propTypes={htmlId:l().string.isRequired,htmlName:l().string.isRequired,disabled:l().bool,title:l().string.isRequired,isRequired:l().bool.isRequired,minLength:l().number,maxLength:l().number},Wi.defaultProps={disabled:!1,minLength:0,maxLength:0};const Qi=["name"];function Xi(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function en(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Xi(Object(i),!0).forEach((function(t){(0,H.A)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Xi(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}const tn={label:{title:o.Translate.string("Label"),inputComponent:Ti,noRequired:!0,noRetentionPeriod:!0,noLabel:!0,icon:"tag",customFormItem:!0},text:{title:o.Translate.string("Text field"),inputComponent:Wi,settingsComponent:function(){return n.createElement(yt.A.Group,{widths:"equal"},n.createElement(u.FinalInput,{name:"minLength",type:"number",label:o.Translate.string("Min. length"),placeholder:String(Wi.defaultProps.minLength),step:"1",min:"0",validate:u.validators.optional(u.validators.chain((e=>0===e?u.validators.STOP_VALIDATION:1===e?o.Translate.string('If you want to make the field required, select the "Required field" checkbox. The minimum length only applies if the field is not empty.'):void 0),u.validators.min(2))),format:e=>e||"",parse:e=>+e||0,fluid:!0}),n.createElement(u.FinalInput,{name:"maxLength",type:"number",label:o.Translate.string("Max. length"),placeholder:o.Translate.string("No maximum"),step:"1",min:"0",validate:u.validators.optional(u.validators.min(0)),format:e=>e||"",parse:e=>+e||0,fluid:!0}))},settingsFormValidator:function(e){let{minLength:t,maxLength:i}=e;if(t&&i&&t>i){const e=o.Translate.string("The minimum length cannot be greater than the maximum length.");return{minLength:e,maxLength:e}}},icon:"textfield"},textarea:{title:o.Translate.string("Text area"),inputComponent:Gi,settingsComponent:function(){return n.createElement(yt.A.Group,{widths:"equal"},n.createElement(u.FinalInput,{name:"numberOfRows",type:"number",label:o.Translate.string("Rows"),placeholder:String(Gi.defaultProps.numberOfRows),step:"1",min:"1",max:"20",validate:u.validators.optional(u.validators.range(1,20)),fluid:!0}))},icon:"textarea"},number:{title:o.Translate.string("Number"),inputComponent:ji,settingsComponent:function(){return n.createElement(yt.A.Group,{widths:"equal"},n.createElement(u.FinalInput,{name:"minValue",type:"number",label:o.Translate.string("Minimum"),placeholder:String(ji.defaultProps.minValue),step:"1",min:"0",validate:u.validators.optional(u.validators.min(0)),format:e=>e||"",parse:e=>+e||0,fluid:!0}),n.createElement(u.FinalInput,{name:"maxValue",type:"number",label:o.Translate.string("Maximum"),placeholder:o.Translate.string("No maximum"),step:"1",min:"0",validate:u.validators.optional(u.validators.min(0)),format:e=>e||"",parse:e=>+e||0,fluid:!0}))},settingsFormValidator:function(e){let{minValue:t,maxValue:i}=e;if(t&&i&&t>i){const e=o.Translate.string("The minimum value cannot be greater than the maximum value.");return{minValue:e,maxValue:e}}},hasPrice:!0,icon:"seven-segment9"},checkbox:{title:o.Translate.string("Checkbox"),inputComponent:si,settingsComponent:function(){return n.createElement(u.FinalInput,{name:"placesLimit",type:"number",label:o.Translate.string("Places limit"),placeholder:o.Translate.string("None"),step:"1",min:"1",validate:u.validators.optional(u.validators.min(0)),parse:e=>""===e?0:+e,format:e=>0===e?"":e})},noLabel:!0,hasPrice:!0,icon:"checkbox-checked",customFormItem:!0},date:{title:o.Translate.string("Date"),inputComponent:yi,settingsComponent:function(){const e=["%d/%m/%Y","%d.%m.%Y","%m/%d/%Y","%m.%d.%Y","%Y/%m/%d","%Y.%m.%d","%m/%Y","%m.%Y","%Y"].map((e=>({key:e,value:e,text:e.replace(/%([HMdmY])/g,((e,t)=>({H:"hh",M:"mm",d:"DD",m:"MM",Y:"YYYY"}[t])))}))),t=[{key:"12h",value:"12h",text:o.Translate.string("12 hours")},{key:"24h",value:"24h",text:o.Translate.string("24 hours")}];return n.createElement(yt.A.Group,{widths:"equal"},n.createElement(u.FinalDropdown,{name:"dateFormat",label:o.Translate.string("Date format"),options:e,required:!0,selection:!0,fluid:!0}),n.createElement(nt.Field,{name:"dateFormat",subscription:{value:!0}},(e=>{let{input:{value:i}}=e;return n.createElement(u.FinalDropdown,{name:"timeFormat",label:o.Translate.string("Time format"),options:t,placeholder:o.Translate.string("None"),disabled:!i.includes("%d"),parse:u.parsers.nullIfEmpty,selection:!0,fluid:!0})})))},settingsFormDecorators:[fi],settingsFormInitialData:{dateFormat:"%d/%m/%Y",timeFormat:null},icon:"calendar"},bool:{title:o.Translate.string("Yes/No"),inputComponent:ai,settingsComponent:function(){const e=[{key:!0,value:!0,text:o.Translate.string("Yes")},{key:!1,value:!1,text:o.Translate.string("No")}];return n.createElement(n.Fragment,null,n.createElement(u.FinalInput,{name:"placesLimit",type:"number",label:o.Translate.string("Places limit"),placeholder:o.Translate.string("None"),step:"1",min:"1",validate:u.validators.optional(u.validators.min(0)),parse:e=>""===e?0:+e,format:e=>0===e?"":e}),n.createElement(u.FinalDropdown,{name:"defaultValue",label:o.Translate.string("Default value"),options:e,placeholder:o.Translate.string("None"),selection:!0}))},hasPrice:!0,icon:"switchon",renderAsFieldset:!0},phone:{title:o.Translate.string("Phone"),inputComponent:Fi,icon:"phone"},country:{title:o.Translate.string("Country"),inputComponent:di,settingsComponent:ci,icon:"earth"},file:{title:o.Translate.string("File"),inputComponent:Ei,icon:"upload",renderAsFieldset:!0},email:{title:o.Translate.string("Email"),inputComponent:hi,icon:"mail"},single_choice:{title:o.Translate.string("Single Choice"),inputComponent:zi,settingsComponent:function(){return n.createElement(n.Fragment,null,n.createElement(u.FinalDropdown,{name:"itemType",label:o.Translate.string("Widget type"),options:[{key:"dropdown",value:"dropdown",text:o.Translate.string("Drop-down list")},{key:"radiogroup",value:"radiogroup",text:o.Translate.string("Radio buttons")}],selection:!0,required:!0}),n.createElement(nt.Field,{name:"choices",subscription:{value:!0},isEqual:xt()},(e=>{let{input:{value:t}}=e;return n.createElement(u.FinalDropdown,{name:"defaultItem",label:o.Translate.string("Default option"),options:t.filter((e=>e.isEnabled)).map((e=>({key:e.id,value:e.id,text:e.caption}))),disabled:!t.some((e=>e.isEnabled)),parse:u.parsers.nullIfEmpty,selection:!0})})),n.createElement(u.FinalCheckbox,{name:"withExtraSlots",label:o.Translate.string("Enable extra slots")}),n.createElement(nt.Field,{name:"withExtraSlots",subscription:{value:!0}},(e=>{let{input:{value:t}}=e;return n.createElement(u.FinalField,{name:"choices",label:o.Translate.string("Choices"),component:$t,withExtraSlots:t,isEqual:xt(),required:!0})})))},settingsModalSize:"small",settingsFormDecorators:[zt,Hi],settingsFormInitialData:{choices:[],itemType:"dropdown",defaultItem:null,withExtraSlots:!1},icon:"dropmenu",renderAsFieldset:!0},multi_choice:{title:o.Translate.string("Multiple Choice"),inputComponent:Ci,settingsComponent:function(){return n.createElement(n.Fragment,null,n.createElement(nt.Field,{name:"choices",subscription:{value:!0}},(e=>{let{input:{value:t}}=e;const i=t.length>0?1:0,a=t.length>0?t.length:0;return n.createElement(u.FinalInput,{name:"maxChoices",type:"number",placeholder:o.Translate.string("Unlimited","Number of choices"),step:"1",min:i,max:a,validate:u.validators.optional(u.validators.range(i,a)),label:o.Translate.string("Maximum number of choices"),description:o.Translate.string("Maximum number of choices that can be selected. Leave empty to unset.")})})),n.createElement(u.FinalCheckbox,{name:"withExtraSlots",label:o.Translate.string("Enable extra slots")}),n.createElement(nt.Field,{name:"withExtraSlots",subscription:{value:!0}},(e=>{let{input:{value:t}}=e;return n.createElement(u.FinalField,{name:"choices",label:o.Translate.string("Choices"),component:$t,withExtraSlots:t,isEqual:xt(),required:!0})})))},settingsModalSize:"small",settingsFormDecorators:[zt],settingsFormInitialData:{choices:[],withExtraSlots:!1},icon:"list",renderAsFieldset:!0},accommodation:{title:o.Translate.string("Accommodation"),inputComponent:Zt,settingsComponent:function(){return n.createElement(n.Fragment,null,n.createElement(M.FinalDatePeriod,{name:"arrival",label:o.Translate.string("Arrival"),disabledDate:()=>!1,extraPickerProps:{noBorder:!0},required:!0}),n.createElement(M.FinalDatePeriod,{name:"departure",label:o.Translate.string("Departure"),disabledDate:()=>!1,extraPickerProps:{noBorder:!0},required:!0}),n.createElement(u.FinalField,{name:"choices",label:o.Translate.string("Choices"),component:$t,isEqual:xt(),forAccommodation:!0,required:!0,validate:e=>{if(!e.some((e=>e.isEnabled)))return o.Translate.string("You need to have at least one enabled option.")}}))},settingsModalSize:"small",settingsFormDecorators:[zt],settingsFormInitialData:e=>({choices:[{id:"new:no-accommodation",caption:"No accommodation",isEnabled:!0,isNoAccommodation:!0,price:0,placesLimit:0}],arrival:{startDate:(0,Ct.serializeDate)((0,Ct.toMoment)(e.eventStartDate,It().HTML5_FMT.DATE).subtract(2,"days")),endDate:(0,Ct.serializeDate)((0,Ct.toMoment)(e.eventEndDate,It().HTML5_FMT.DATE))},departure:{startDate:(0,Ct.serializeDate)((0,Ct.toMoment)(e.eventStartDate,It().HTML5_FMT.DATE).add(1,"days")),endDate:(0,Ct.serializeDate)((0,Ct.toMoment)(e.eventEndDate,It().HTML5_FMT.DATE).add(3,"days"))}}),settingsFormValidator:function(e){let{arrival:t,departure:i}=e;const n=(0,Ct.toMoment)(t.startDate,It().HTML5_FMT.DATE),a=(0,Ct.toMoment)(t.endDate,It().HTML5_FMT.DATE),r=(0,Ct.toMoment)(i.startDate,It().HTML5_FMT.DATE),s=(0,Ct.toMoment)(i.endDate,It().HTML5_FMT.DATE),l={};if(n&&a&&r&&s)return r.isBefore(n)&&(l.departure=o.Translate.string("The departure period cannot begin before the arrival period.")),a.isAfter(s)&&(l.arrival=o.Translate.string("The arrival period cannot end after the departure period.")),l},noRequired:!0,alwaysRequired:!0,icon:"home",renderAsFieldset:!0},accompanying_persons:{title:o.Translate.string("Accompanying Persons"),inputComponent:ti,settingsComponent:function(){return n.createElement(n.Fragment,null,n.createElement(u.FinalInput,{name:"maxPersons",type:"number",label:o.Translate.string("Maximum per registrant"),placeholder:o.Translate.string("No maximum"),step:"1",min:"0",validate:u.validators.optional(u.validators.min(0)),fluid:!0,format:e=>e||"",parse:e=>+e||0}),n.createElement(u.FinalCheckbox,{name:"personsCountAgainstLimit",label:o.Translate.string("Accompanying persons count against registration limit")}))},settingsFormInitialData:{maxPersons:1,personsCountAgainstLimit:!1},settingsModalSize:"tiny",noRequired:!0,hasPrice:!0,icon:"user",renderAsFieldset:!0},picture:{title:o.Translate.string("Picture"),inputComponent:Li,icon:"image",settingsComponent:function(){return n.createElement(u.FinalInput,{name:"minPictureSize",type:"number",label:o.Translate.string("Minimum picture size"),placeholder:o.Translate.string("Unlimited"),description:o.Translate.string("Minimum picture size that can be uploaded in pixels. Leave empty for no min size validation."),step:"1",min:"0",max:"1200",validate:u.validators.optional(u.validators.min(0)),fluid:!0,format:e=>e||"",parse:e=>+e||0})}}};function nn(){const e=Object.fromEntries((0,bt.getPluginObjects)("regformCustomFields").map((e=>{let{name:t}=e;return[t,(0,w.A)(e,Qi)]})));if(Object.keys(e).some((e=>!e.startsWith("ext__"))))throw new Error("Field names from plugins must begin with `ext__`");return en(en({},tn),e)}const an=["title","description","retentionPeriod","inputType","isEnabled","isRequired","isPurged","lockedReason","sortHandle","setupMode","setupActions"],rn={"../../styles/regform.module.scss":{"setup-toolbar":"events-registration-client-styles-___regform-module__setup-toolbar___tu1Kv","disabled-sections":"events-registration-client-styles-___regform-module__disabled-sections___TthNB",actions:"events-registration-client-styles-___regform-module__actions___yuXgO","form-item":"events-registration-client-styles-___regform-module__form-item___AlbiE",disabled:"events-registration-client-styles-___regform-module__disabled___A4p+q",content:"events-registration-client-styles-___regform-module__content___dKw31","paid-disabled":"events-registration-client-styles-___regform-module__paid-disabled___e8zT-","purged-disabled":"events-registration-client-styles-___regform-module__purged-disabled___oo16L",label:"events-registration-client-styles-___regform-module__label___t11lD",field:"events-registration-client-styles-___regform-module__field___mpG7J","price-tag":"events-registration-client-styles-___regform-module__price-tag___pz3tt","places-left":"events-registration-client-styles-___regform-module__places-left___6O4Ev",greyed:"events-registration-client-styles-___regform-module__greyed___HZLen","number-field":"events-registration-client-styles-___regform-module__number-field___LtuaG","boolean-field":"events-registration-client-styles-___regform-module__boolean-field___0geJs","date-field":"events-registration-client-styles-___regform-module__date-field___LToLh","file-field":"events-registration-client-styles-___regform-module__file-field___1Nup7","accommodation-field":"events-registration-client-styles-___regform-module__accommodation-field___WHQ+0","date-picker":"events-registration-client-styles-___regform-module__date-picker___zVaWU","accompanyingpersons-field":"events-registration-client-styles-___regform-module__accompanyingpersons-field___MUvS6",light:"events-registration-client-styles-___regform-module__light___gdy5g",summary:"events-registration-client-styles-___regform-module__summary___Krn7Y","country-dropdown":"events-registration-client-styles-___regform-module__country-dropdown___Hhf-Y","single-choice-dropdown":"events-registration-client-styles-___regform-module__single-choice-dropdown___tzmJ5","dropdown-text":"events-registration-client-styles-___regform-module__dropdown-text___GB4OB",caption:"events-registration-client-styles-___regform-module__caption___u54ZN",labels:"events-registration-client-styles-___regform-module__labels___Zy8f7","single-choice-radio-group":"events-registration-client-styles-___regform-module__single-choice-radio-group___E9qIt",description:"events-registration-client-styles-___regform-module__description___abkAU",editable:"events-registration-client-styles-___regform-module__editable___ZHQMz","sortable-handle":"events-registration-client-styles-___regform-module__sortable-handle___yz1-x","header-wrapper":"events-registration-client-styles-___regform-module__header-wrapper___U6gJN","section-sortable-handle":"events-registration-client-styles-___regform-module__section-sortable-handle___ABMeH","manager-only":"events-registration-client-styles-___regform-module__manager-only___PQwvG","section-actions":"events-registration-client-styles-___regform-module__section-actions___p3bRe","dropdown-menu":"events-registration-client-styles-___regform-module__dropdown-menu___9uq+D","dropdown-item":"events-registration-client-styles-___regform-module__dropdown-item___chpZW"}};function sn(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function ln(e){let{management:t}=e;const i=n.createElement(o.Translate,null,"This field is locked since changing it could trigger a price change."),a=t?n.createElement(n.Fragment,null,i," ",n.createElement(o.Translate,null,"As a manager you can modify it nonetheless.")):i;return n.createElement(st.A,{trigger:n.createElement(E.A,{name:t?"lock open":"lock"})},a)}function on(e){let{isUpdateMode:t}=e;const i=n.createElement(o.Translate,null,"This field is locked due to an expired retention period."),a=t?n.createElement(n.Fragment,null,i," ",n.createElement(o.Translate,null,"The associated registration data has been deleted.")):i;return n.createElement(st.A,{trigger:n.createElement(E.A,{name:"lock"})},a)}function dn(e){let{reason:t}=e;return n.createElement(st.A,{trigger:n.createElement(E.A,{name:"lock"})},t)}function cn(e){let{title:t,description:i,retentionPeriod:a,inputType:r,isEnabled:s,isRequired:l,isPurged:d,lockedReason:c,sortHandle:m,setupMode:u,setupActions:_}=e,p=(0,w.A)(e,an);const g=(0,Y.useSelector)((e=>Ot(e,p.id))),y=(0,Y.useSelector)(Et),f=(0,Y.useSelector)(vt),b=nn()[r]||{},v=b.inputComponent,h=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?sn(Object(i),!0).forEach((function(t){(0,H.A)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):sn(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({title:t,description:i,isEnabled:s},p),D=!u&&d,q=!s||D||!!c||g&&!y;let R=null;u&&a&&(R=n.createElement(E.A,{name:"clock outline",color:"red",style:{marginLeft:"3px"},title:o.PluralTranslate.string("Field data will be purged {retentionPeriod} week after the event ended.","Field data will be purged {retentionPeriod} weeks after the event ended.",a,{retentionPeriod:a})}));const O=b.alwaysRequired||l,P=!y&&O,x=`input-${h.id}`,A=v&&!b.customFormItem?n.createElement(n.Fragment,null,R,n.createElement(v,(0,T.A)({isRequired:P,disabled:q,isPurged:D,htmlId:x},h))):null;return n.createElement("div",{className:(0,gt.A)(`form-item ${(0,ft.toClasses)({disabled:!s||g,"purged-disabled":D,"paid-disabled":!D&&g,editable:u})}`,rn,{autoResolveMultipleImports:!0,handleMissingStyleName:"throw"})},m,n.createElement("div",{className:"events-registration-client-styles-___regform-module__content___dKw31"},v?b.customFormItem?n.createElement(v,(0,T.A)({showAsRequired:O,isRequired:P,disabled:q,isPurged:D,retentionPeriodIcon:R,htmlId:x},h)):n.createElement(yt.A.Field,{required:O,className:"events-registration-client-styles-___regform-module__field___mpG7J"},b.renderAsFieldset?n.createElement("fieldset",null,n.createElement("legend",{style:{opacity:q?.8:1,display:"inline-block"}},t),A):n.createElement(n.Fragment,null,n.createElement("label",{htmlFor:x,style:{opacity:q?.8:1,display:"inline-block"}},t),A)):`Unknown input type: ${r}`,i&&n.createElement("div",{className:"events-registration-client-styles-___regform-module__description___abkAU"},n.createElement(ft.Markdown,null,i)),(0,bt.renderPluginComponents)(`regform-${r}-field-item`,h)),_&&n.createElement("div",{className:"events-registration-client-styles-___regform-module__actions___yuXgO"},_),c&&n.createElement(dn,{reason:c}),!c&&D&&n.createElement(on,{isUpdateMode:f}),!c&&!D&&g&&n.createElement(ln,{management:y}))}ln.propTypes={management:l().bool.isRequired},on.propTypes={isUpdateMode:l().bool.isRequired},dn.propTypes={reason:l().string.isRequired},cn.propTypes={id:l().number.isRequired,title:l().string.isRequired,description:l().string.isRequired,isEnabled:l().bool.isRequired,position:l().number.isRequired,isRequired:l().bool,isPurged:l().bool.isRequired,lockedReason:l().string,retentionPeriod:l().number,fieldIsPersonalData:l().bool,fieldIsRequired:l().bool,htmlName:l().string,inputType:l().string.isRequired,sortHandle:l().node,setupMode:l().bool,setupActions:l().node},cn.defaultProps={fieldIsPersonalData:!1,fieldIsRequired:!1,isRequired:!1,lockedReason:"",retentionPeriod:null,htmlName:null,sortHandle:null,setupMode:!1,setupActions:null};const mn={"../../styles/regform.module.scss":{"setup-toolbar":"events-registration-client-styles-___regform-module__setup-toolbar___tu1Kv","disabled-sections":"events-registration-client-styles-___regform-module__disabled-sections___TthNB",actions:"events-registration-client-styles-___regform-module__actions___yuXgO","form-item":"events-registration-client-styles-___regform-module__form-item___AlbiE",disabled:"events-registration-client-styles-___regform-module__disabled___A4p+q",content:"events-registration-client-styles-___regform-module__content___dKw31","paid-disabled":"events-registration-client-styles-___regform-module__paid-disabled___e8zT-","purged-disabled":"events-registration-client-styles-___regform-module__purged-disabled___oo16L",label:"events-registration-client-styles-___regform-module__label___t11lD",field:"events-registration-client-styles-___regform-module__field___mpG7J","price-tag":"events-registration-client-styles-___regform-module__price-tag___pz3tt","places-left":"events-registration-client-styles-___regform-module__places-left___6O4Ev",greyed:"events-registration-client-styles-___regform-module__greyed___HZLen","number-field":"events-registration-client-styles-___regform-module__number-field___LtuaG","boolean-field":"events-registration-client-styles-___regform-module__boolean-field___0geJs","date-field":"events-registration-client-styles-___regform-module__date-field___LToLh","file-field":"events-registration-client-styles-___regform-module__file-field___1Nup7","accommodation-field":"events-registration-client-styles-___regform-module__accommodation-field___WHQ+0","date-picker":"events-registration-client-styles-___regform-module__date-picker___zVaWU","accompanyingpersons-field":"events-registration-client-styles-___regform-module__accompanyingpersons-field___MUvS6",light:"events-registration-client-styles-___regform-module__light___gdy5g",summary:"events-registration-client-styles-___regform-module__summary___Krn7Y","country-dropdown":"events-registration-client-styles-___regform-module__country-dropdown___Hhf-Y","single-choice-dropdown":"events-registration-client-styles-___regform-module__single-choice-dropdown___tzmJ5","dropdown-text":"events-registration-client-styles-___regform-module__dropdown-text___GB4OB",caption:"events-registration-client-styles-___regform-module__caption___u54ZN",labels:"events-registration-client-styles-___regform-module__labels___Zy8f7","single-choice-radio-group":"events-registration-client-styles-___regform-module__single-choice-radio-group___E9qIt",description:"events-registration-client-styles-___regform-module__description___abkAU",editable:"events-registration-client-styles-___regform-module__editable___ZHQMz","sortable-handle":"events-registration-client-styles-___regform-module__sortable-handle___yz1-x","header-wrapper":"events-registration-client-styles-___regform-module__header-wrapper___U6gJN","section-sortable-handle":"events-registration-client-styles-___regform-module__section-sortable-handle___ABMeH","manager-only":"events-registration-client-styles-___regform-module__manager-only___PQwvG","section-actions":"events-registration-client-styles-___regform-module__section-actions___p3bRe","dropdown-menu":"events-registration-client-styles-___regform-module__dropdown-menu___9uq+D","dropdown-item":"events-registration-client-styles-___regform-module__dropdown-item___chpZW"}};function un(e){let{title:t,description:i,isManagerOnly:a,items:r,sortHandle:s,itemComponent:l,itemProps:d,setupMode:c,setupActions:m}=e;const u=r.filter((e=>e.isEnabled)),_=c?r.filter((e=>!e.isEnabled)):[],p=n.createElement(st.A,{content:o.Translate.string("This section is only visible to managers."),trigger:n.createElement("i",{className:"icon-user-reading",style:{marginRight:5}})});return n.createElement("div",{className:"regform-section "+(0,gt.A)(a?"manager-only":null,mn,{autoResolveMultipleImports:!0,handleMissingStyleName:"throw"})},n.createElement("div",{className:"i-box-header"},s,n.createElement("div",{className:"events-registration-client-styles-___regform-module__header-wrapper___U6gJN"},n.createElement("div",{className:"i-box-title"},a?p:null,t),n.createElement("div",{className:"i-box-description"},n.createElement(ft.Markdown,null,i))),m&&n.createElement("div",{className:"i-box-buttons events-registration-client-styles-___regform-module__section-actions___p3bRe"},m)),n.createElement(yt.A,{as:"div",className:"i-box-content"},u.map(((e,t)=>n.createElement(l,(0,T.A)({key:e.id,index:t,setupMode:c},d,e)))),_.length>0&&n.createElement(n.Fragment,null,n.createElement("div",{className:"titled-rule section-field-divisor"},n.createElement(o.Translate,null,"Disabled fields")," ",n.createElement("i",{className:"info-helper",title:o.Translate.string("These fields won't be displayed to registrants")})),_.map(((e,t)=>n.createElement(l,(0,T.A)({key:e.id,index:t,setupMode:c},d,e)))))))}un.propTypes={id:l().number.isRequired,title:l().string.isRequired,description:l().string.isRequired,enabled:l().bool.isRequired,position:l().number.isRequired,isManagerOnly:l().bool.isRequired,isPersonalData:l().bool.isRequired,items:l().arrayOf(l().shape(cn.propTypes)).isRequired,sortHandle:l().node,itemComponent:l().elementType,itemProps:l().object,setupMode:l().bool,setupActions:l().node},un.defaultProps={setupMode:!1,setupActions:null,sortHandle:null,itemComponent:cn,itemProps:{}};var _n=i(94360),pn=i.n(_n),gn=i(48404);const yn=["key"],fn=["key"];function bn(e){let{newItemType:t,inModal:i,onClick:a}=e;const r=nn(),s=t?r[t].title:o.Translate.string("Choose type");let l;l=i?{icon:"dropdown",text:s}:{icon:null,className:"hide-if-locked",trigger:n.createElement("a",{className:"icon-plus",title:o.Translate.string("Add field")})};const d=Object.entries(r).filter((e=>{let[t]=e;return"label"!==t})).map((e=>{let[t,{title:i,icon:n}]=e;return{key:t,value:t,text:i,icon:n}})),c=Math.ceil(d.length/2);return n.createElement(q.A,(0,T.A)({selectOnNavigation:!1,selectOnBlur:!1,value:t},l),n.createElement(q.A.Menu,null,n.createElement(vn,{value:"label",text:r.label.title,icon:r.label.icon,centered:!0,onClick:a}),n.createElement(q.A.Divider,{style:{margin:0}}),n.createElement("div",{className:"events-registration-client-styles-___regform-module__dropdown-menu___9uq+D"},n.createElement("div",null,d.slice(0,c).map((e=>{let{key:t}=e,i=(0,w.A)(e,yn);return n.createElement(vn,(0,T.A)({key:t,onClick:a},i))}))),n.createElement("div",null,d.slice(c).map((e=>{let{key:t}=e,i=(0,w.A)(e,fn);return n.createElement(vn,(0,T.A)({key:t,onClick:a},i))}))))))}function vn(e){let{value:t,text:i,icon:a,centered:r,onClick:s}=e;return n.createElement("div",{className:"events-registration-client-styles-___regform-module__dropdown-item___chpZW",style:r?{textAlign:"center"}:null,onClick:()=>s(t)},n.createElement("i",{className:`icon-${a}`}),n.createElement("span",null,i))}bn.propTypes={newItemType:l().string,inModal:l().bool.isRequired,onClick:l().func.isRequired},bn.defaultProps={newItemType:null},vn.propTypes={value:l().string.isRequired,text:l().string.isRequired,icon:l().string.isRequired,centered:l().bool,onClick:l().func.isRequired},vn.defaultProps={centered:!1};const hn=["inputType","fieldIsRequired"];function Dn(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function En(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Dn(Object(i),!0).forEach((function(t){(0,H.A)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Dn(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}const Tn={};function wn(e){let{id:t,sectionId:i,defaultNewItemType:a,onClose:r}=e;const s=(0,Y.useDispatch)(),[l,d]=(0,n.useState)(a),c=null!==t,m=(0,Y.useSelector)(Z),_=(0,Y.useSelector)((e=>c?Q(e,t):Tn)),{inputType:g,fieldIsRequired:y}=_,f=(0,w.A)(_,hn),b=c?g:l,v=nn(),h=!(b in v),D=v[b]||{},T=D.settingsComponent;let q=f;c||(q=pn()(D.settingsFormInitialData)?D.settingsFormInitialData(m):D.settingsFormInitialData,D.hasPrice&&(q=En(En({},q||{}),{},{price:0})));return n.createElement(mt.Sz,{key:c?"edit":`new-${l}`,id:"regform-item-settings",onSubmit:async(e,n)=>{const a=(0,u.getValuesForFields)(e,n),l=c?function(e,t){return async(i,n)=>{const a=n(),r=se(a,e),s=oe(a,e)(fe,ge)(de(a)(r,e)),l={fieldData:t},o=await(0,z.HX)((()=>p.indicoAxios.patch(s,l)))(i);return o.error||i($e(e,o.data.view_data)),(0,V.camelizeKeys)(o)}}(t,a):Je(i,b,a),o=await s(l);if(o.error)return o.error;r()},onClose:r,initialValues:q,initialValuesEqual:xt(),unloadPrompt:!0,size:D.settingsModalSize||"tiny",decorators:D.settingsFormDecorators?D.settingsFormDecorators:void 0,validate:D.settingsFormValidator,header:c?n.createElement(o.Translate,null,'Configure field "',n.createElement(o.Param,{name:"section",value:f.title}),'"'):n.createElement(n.Fragment,null,n.createElement(o.Translate,null,"Add new field"),n.createElement("div",{style:{float:"right"}},n.createElement(nt.FormSpy,{subscription:{dirty:!0}},(e=>{let{dirty:t}=e;return n.createElement(bn,{newItemType:l,inModal:!0,onClick:e=>((e,t)=>{l&&e&&!confirm("Changing the type will reset this form.")||d(t)})(t,e)})}))))},c||l?n.createElement(n.Fragment,null,n.createElement(u.FinalInput,{name:"title",label:o.Translate.string("Title"),required:!0,autoFocus:!0}),n.createElement(u.FinalTextArea,{name:"description",label:o.Translate.string("Description"),description:n.createElement(o.Translate,null,"You can use Markdown or basic HTML formatting tags.")}),D.hasPrice&&n.createElement(u.FinalInput,{name:"price",type:"number",min:"0",step:"0.01",validate:u.validators.min(0),parse:e=>u.parsers.number(e,!0,0),label:o.Translate.string("Price")}),!D.noRequired&&n.createElement(u.FinalCheckbox,{name:"isRequired",label:o.Translate.string("Required field"),disabled:y}),T&&n.createElement(T,f),(0,bt.renderPluginComponents)(`regform-${b}-field-settings`,En({},f)),!D.noRetentionPeriod&&!y&&n.createElement(gn.Fieldset,{legend:o.Translate.string("Privacy"),compact:!0},n.createElement(u.FinalInput,{name:"retentionPeriod",type:"number",placeholder:o.Translate.string("Permanent"),step:"1",min:"1",max:"521",validate:u.validators.optional(u.validators.range(1,521)),label:o.Translate.string("Retention period (weeks)"),description:o.Translate.string("Specify how long user-provided data for this field will be preserved in the database.")}),n.createElement(nt.FormSpy,{subscription:{values:!0}},(e=>{let{values:t}=e;return(t.price||t.isPriceSet)&&t.retentionPeriod?n.createElement(bi.A,{visible:!0,icon:!0,warning:!0},n.createElement(E.A,{name:"warning"}),n.createElement(bi.A.Content,null,n.createElement(o.Translate,null,"Please note that invoice information will be lost as well once a field's retention period expires."))):""}))),h&&n.createElement(bi.A,{visible:!0,warning:!0},"Unknown input type: ",b,".",n.createElement("br",null),"Saving changes will most likely fail or result in some settings being lost.")):n.createElement(bi.A,{info:!0},n.createElement(o.Translate,null,"Please choose a field type.")))}function qn(e){let{id:t,isPersonalData:i}=e;const[a,r]=(0,n.useState)(!1),[s,l]=(0,n.useState)(!1),[d,c]=(0,n.useState)(null),m=(0,Y.useDispatch)();return n.createElement(n.Fragment,null,!i&&n.createElement("a",{className:"icon-disable hide-if-locked",title:o.Translate.string("Disable section"),onClick:()=>{var e;m((e=t,async(t,i)=>{const n=i(),a=de(n)(e),r=Ee(me(me({},a),{},{enable:"false"})),s=await ke((()=>p.indicoAxios.post(r)))(t);s.error||(t(Ue(e,!1)),t(Me(s.data.positions)))}))}}),n.createElement("a",{className:"icon-settings hide-if-locked",title:o.Translate.string("Configure section"),onClick:()=>{r(!0)}}),n.createElement(bn,{inModal:!1,onClick:e=>{c(e),l(!0)}}),a&&n.createElement(ut,{id:t,onClose:()=>r(!1)}),s&&n.createElement(wn,{sectionId:t,defaultNewItemType:d,onClose:()=>l(!1)}))}function Rn(e){let{id:t,title:i,fieldIsRequired:a,fieldIsPersonalData:r,isEnabled:s}=e;const l=(0,Y.useDispatch)(),[d,c]=(0,n.useState)(!1),[m,u]=(0,n.useState)(!1);return n.createElement(n.Fragment,null,!r&&n.createElement("a",{className:"icon-remove hide-if-locked",title:o.Translate.string("Remove field"),onClick:()=>{u(!0)}}),!s&&n.createElement("a",{className:"icon-checkmark hide-if-locked",title:o.Translate.string("Enable field"),onClick:()=>{var e;l((e=t,async(t,i)=>{const n=i(),a=se(n,e),r=oe(n,e)(Te,De)(me(me({},de(n)(a,e)),{},{enable:"true"})),s=await ke((()=>p.indicoAxios.post(r)))(t);s.error||(t($e(e,s.data.view_data)),t(Me(s.data.positions)))}))}}),!a&&s&&n.createElement("a",{className:"icon-disable hide-if-locked",title:o.Translate.string("Disable field"),onClick:()=>{var e;l((e=t,async(t,i)=>{const n=i(),a=se(n,e),r=oe(n,e)(Te,De)(me(me({},de(n)(a,e)),{},{enable:"false"})),s=await ke((()=>p.indicoAxios.post(r)))(t);s.error||(t($e(e,s.data.view_data)),t(Me(s.data.positions)))}))}}),n.createElement("a",{className:"icon-settings hide-if-locked",title:o.Translate.string("Configure field"),onClick:()=>{c(!0)}}),d&&n.createElement(wn,{id:t,onClose:()=>c(!1)}),n.createElement(M.RequestConfirmDelete,{requestFunc:()=>l(Be(t)),onClose:()=>u(!1),open:m,persistent:!0},n.createElement(o.Translate,null,'Are you sure you want to delete the field "',n.createElement(o.Param,{name:"field",value:i,wrapper:n.createElement("strong",null)}),'"?')))}wn.propTypes={id:l().number,sectionId:l().number,defaultNewItemType:l().string,onClose:l().func.isRequired},wn.defaultProps={id:null,sectionId:null,defaultNewItemType:null},qn.propTypes={id:l().number.isRequired,isPersonalData:l().bool.isRequired},Rn.propTypes={id:l().number.isRequired,title:l().string.isRequired,fieldIsRequired:l().bool.isRequired,fieldIsPersonalData:l().bool.isRequired,isEnabled:l().bool.isRequired};const On=["index","sectionId"];function Pn(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function xn(e){let{index:t,sectionId:i}=e,a=(0,w.A)(e,On);const{id:r,isEnabled:s}=a,l=(0,Y.useDispatch)(),[o,d,c]=(0,at.f)({type:`regform-item@${i}`,id:r,index:t,separateHandle:!0,active:s,moveItem:(e,t)=>{l(Ye(i,e,t))},onDrop:e=>{e.index!==e.originalIndex&&l(function(e,t,i,n){return async(a,r)=>{const s=r(),l=oe(s,t)(he,be)(de(s)(e,t));(await ke((()=>p.indicoAxios.post(l,{endPos:i})))(a)).error&&a(Ye(e,i,n))}}(i,e.id,e.index,e.originalIndex))}});return n.createElement("div",{ref:d,style:c},n.createElement(cn,(0,T.A)({sortHandle:n.createElement("div",{className:"hide-if-locked events-registration-client-styles-___regform-module__sortable-handle___yz1-x",ref:o}),setupActions:n.createElement(Rn,a)},a)))}const An=pt()(cn.propTypes,"inputType","isEnabled",...Object.keys(Rn.propTypes));xn.propTypes=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Pn(Object(i),!0).forEach((function(t){(0,H.A)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Pn(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({sectionId:l().number.isRequired,index:l().number.isRequired},An),xn.defaultProps=pt()(cn.defaultProps,Object.keys(An));const In=["index"];function Cn(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Sn(e){let{index:t}=e,i=(0,w.A)(e,In);const{id:a}=i,r=(0,Y.useDispatch)(),[s,l,o]=(0,at.f)({type:"regform-section",id:a,index:t,separateHandle:!0,moveItem:(e,t)=>{r(Le(e,t))},onDrop:e=>{var t,i,n;e.index!==e.originalIndex&&r((t=e.id,i=e.index,n=e.originalIndex,async(e,a)=>{const r=a(),s=ve(de(r)(t));(await ke((()=>p.indicoAxios.post(s,{endPos:i})))(e)).error&&e(Le(i,n))}))}});return n.createElement("div",{ref:l,style:o},n.createElement(at.S,{accept:`regform-item@${a}`},n.createElement(un,(0,T.A)({sortHandle:n.createElement("div",{className:"hide-if-locked events-registration-client-styles-___regform-module__section-sortable-handle___ABMeH",ref:s}),setupActions:n.createElement(qn,i),itemComponent:xn,itemProps:{sectionId:a}},i))))}const jn=pt()(un.propTypes,"id");function Fn(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Nn(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Fn(Object(i),!0).forEach((function(t){(0,H.A)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Fn(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function kn(){const e=(0,Y.useSelector)(ie),t=(0,Y.useSelector)(ae),i=(0,Y.useSelector)(W),a=(0,Y.useSelector)(ne),[r,s]=(0,n.useState)(!1),[l,m]=(0,n.useState)(!1),u=Object.fromEntries(Object.entries(i).map((e=>{let[,{htmlName:t,defaultValue:i}]=e;return[t,i]})));return n.createElement(d.A.Dimmable,{dimmed:a},n.createElement(tt.Q,{backend:it.t2},n.createElement("div",{className:"toolbar events-registration-client-styles-___regform-module__setup-toolbar___tu1Kv"},n.createElement(M.IButton,{icon:"plus",onClick:()=>m(!0)},n.createElement(o.Translate,null,"Add section")),t.length>0&&n.createElement(M.IButton,{onClick:()=>s(!0)},n.createElement(o.Translate,null,"Disabled sections"))),n.createElement(nt.Form,{initialValues:u,subscription:{initialValues:!0},onSubmit:()=>{}},(t=>{const i=e.map((e=>Nn(Nn({},e),{},{items:e.items.filter((e=>e.htmlName in t.initialValues))})));return n.createElement(at.S,{accept:"regform-section",className:"regform-section-list"},i.map(((e,t)=>n.createElement(Sn,(0,T.A)({key:e.id,index:t},e,{setupMode:!0})))))}))),l&&n.createElement(ut,{onClose:()=>m(!1)}),r&&n.createElement(ct,{onClose:()=>s(!1)}),n.createElement(d.A,{inverted:!0,active:a},n.createElement(c.A,{size:"massive"},n.createElement(o.Translate,null,"Saving..."))))}function Mn(e){const{eventId:t,eventStartDate:i,eventEndDate:r,regformId:s,currency:l,hasPredefinedAffiliations:o,formData:d}=e.dataset,c={staticData:{eventId:parseInt(t,10),regformId:parseInt(s,10),hasPredefinedAffiliations:JSON.parse(o),eventStartDate:i,eventEndDate:r,currency:l}},m=(0,z.Ay)("regform-setup",et,c);var u;m.dispatch((u=JSON.parse(d),{type:Re,items:u.items,sections:u.sections})),a.render(n.createElement(Y.Provider,{store:m},n.createElement(kn,null)),e)}Sn.propTypes=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Cn(Object(i),!0).forEach((function(t){(0,H.A)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Cn(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({index:l().number.isRequired},jn);const Ln="Set form data";const Un={items:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===Ln?t.items:e},sections:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===Ln?t.sections:e}},Yn=r.Ay.bind(null,{endpoint:"events.display_privacy",rules:[{args:["event_id"],converters:{event_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"privacy",isDynamic:!1}]}]},"/");function $n(e){let{url:t}=e;const i=n.createElement("label",null,n.createElement(o.Translate,null,"I have read and agree to the"," ",n.createElement(o.Param,{name:"url",wrapper:n.createElement("a",{href:t,target:"_blank",rel:"noreferrer"})},"Privacy policy")));return n.createElement(bi.A,{info:!0,style:{marginTop:25}},n.createElement(bi.A.Header,null,n.createElement(o.Translate,null,"Privacy policy")),n.createElement(yt.A,{as:"div",style:{marginTop:10}},n.createElement(u.FinalCheckbox,{required:!0,label:i,name:"agreed_to_privacy_policy",toggle:!0})))}function zn(e){let{isUpdateMode:t}=e;return n.createElement(bi.A,{info:!0,style:{marginTop:25}},n.createElement(bi.A.Header,null,n.createElement(o.Translate,null,"Management Options")),n.createElement("div",null,n.createElement(u.FinalCheckbox,{style:{marginTop:10},label:o.Translate.string("Send an email notification to the user"),name:"notify_user",toggle:!0}),!t&&n.createElement(u.FinalCheckbox,{style:{marginTop:10},label:o.Translate.string("Ignore field requirements for custom fields"),name:"override_required",toggle:!0})))}function Hn(e){let{publishToParticipants:t,publishToPublic:i}=e;const a="show_all"===t&&"show_all"===i;return n.createElement(bi.A,{info:!a,warning:a,style:{marginTop:25}},n.createElement(bi.A.Header,null,n.createElement(o.Translate,null,"Participant list")),("show_with_consent"===t||"show_with_consent"===i)&&n.createElement("p",null,n.createElement(o.Translate,null,"Specify whether you consent to being included in the event's list of participants")),n.createElement(yt.A,{as:"div"},n.createElement(P,{name:"consent_to_publish",publishToParticipants:t,publishToPublic:i,useFinalForms:!0})))}function Vn(){const e=(0,Y.useSelector)(ie),{eventId:t,submitUrl:i,registrationData:a,initialValues:r,captchaRequired:s,captchaSettings:l,policyAgreementRequired:d}=(0,Y.useSelector)(Z),c=(0,Y.useSelector)(vt),m=(0,Y.useSelector)(Dt),_=(0,Y.useSelector)(Et),g=(0,Y.useSelector)(wt),y=(0,Y.useSelector)(qt),f=!_&&"hide_all"!==g;return n.createElement(nt.Form,{onSubmit:async(e,t)=>{let n;e=We()(e,"agreed_to_privacy_policy");const a=c?(0,u.getChangedValues)(e,t,["notify_user"]):e;try{n=await p.indicoAxios.post(i,a)}catch(e){return(0,u.handleSubmitError)(e)}n.data.redirect&&(location.href=n.data.redirect,await new Promise((()=>{})))},initialValues:c?a:r,initialValuesEqual:xt(),subscription:{},decorators:(0,bt.getPluginObjects)("regformFormDecorators")},(i=>n.createElement("form",{onSubmit:i.handleSubmit},(0,bt.renderPluginComponents)("regformBeforeSections"),e.map((e=>n.createElement(un,(0,T.A)({key:e.id},e)))),(0,bt.renderPluginComponents)("regformAfterSections"),n.createElement("div",null,_&&n.createElement(zn,{isUpdateMode:c}),f&&n.createElement(Hn,{publishToParticipants:g,publishToPublic:y}),s&&n.createElement(M.Captcha,{settings:l}),!_&&!c&&d&&n.createElement($n,{url:Yn({event_id:t})}),n.createElement(u.FinalSubmitButton,{disabledUntilChange:!1,disabledIfInvalid:!1,label:c?o.Translate.string("Modify"):m?o.Translate.string("Apply"):o.Translate.string("Register"),style:{marginTop:20,textAlign:"right"}})))))}$n.propTypes={url:l().string.isRequired},zn.propTypes={isUpdateMode:l().bool.isRequired},Hn.propTypes={publishToParticipants:l().oneOf(["hide_all","show_with_consent","show_all"]).isRequired,publishToPublic:l().oneOf(["hide_all","show_with_consent","show_all"]).isRequired};const Bn=["eventId","regformId","currency","management","paid","moderated","submitUrl","formData","initialValues","registrationData","registrationUuid","fileData","publishToParticipants","publishToPublic","consentToPublish","policyAgreementRequired","captchaRequired","captchaSettings"];function Jn(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Gn(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Jn(Object(i),!0).forEach((function(t){(0,H.A)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Jn(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Zn(e){const t=e.dataset,{eventId:i,regformId:r,currency:s,management:l,paid:o,moderated:d=!1,submitUrl:c,formData:m,initialValues:u=null,registrationData:_=null,registrationUuid:p=null,fileData:g=null,publishToParticipants:y,publishToPublic:f,consentToPublish:b=null,policyAgreementRequired:v,captchaRequired:h=!1,captchaSettings:D=null}=t,E=(0,w.A)(t,Bn),T={staticData:{eventId:parseInt(i,10),regformId:parseInt(r,10),management:JSON.parse(l),paid:!!o&&JSON.parse(o),moderated:JSON.parse(d),initialValues:JSON.parse(u),submitUrl:c,registrationData:_?Gn(Gn({},JSON.parse(_)),{},{consent_to_publish:b}):{},registrationUuid:p,fileData:g?JSON.parse(g):{},currency:s,publishToParticipants:y,publishToPublic:f,policyAgreementRequired:JSON.parse(v),captchaRequired:JSON.parse(h),captchaSettings:JSON.parse(D),extraData:E}},q=(0,z.Ay)("regform-submission",Un,T);var R;q.dispatch((R=JSON.parse(m),{type:Ln,items:R.items,sections:R.sections})),a.render(n.createElement(Y.Provider,{store:q},n.createElement(Vn,null)),e)}!function(e){function t(){const e=document.getElementById("registration-detail-registration-tags-assign");if(e){const t=JSON.parse(e.dataset.assignedTags),i=JSON.parse(e.dataset.allTags),{eventId:r,regformId:s,registrationId:l}=e.dataset;a.render(n.createElement(U,{eventId:parseInt(r,10),regformId:parseInt(s,10),registrationId:parseInt(l,10),assignedTags:t,allTags:i}),e)}}function i(){const e=document.getElementById("registration-summary-consent-to-publish");if(e){const{locator:t,publishToParticipants:i,publishToPublic:r,initialConsentToPublish:s}=e.dataset;a.render(n.createElement(A,{locator:JSON.parse(t),publishToParticipants:i,publishToPublic:r,initialConsentToPublish:s}),e)}}$(document).ready((function(){$(".js-regform-schedule-dialog").on("click",(function(e){e.preventDefault(),ajaxDialog({url:$(this).data("href"),title:$(this).data("title"),onClose(e){e&&location.reload()}})})),$(".js-check-conditions").on("click",(function(e){const t=$("#conditions-accepted");if(t.length&&!t.prop("checked")){const t="Please, confirm that you have read and accepted the Terms and Conditions before proceeding.";alertPopup($T.gettext(t),$T.gettext("Terms and Conditions")),e.preventDefault()}})),$(".js-highlight-payment").on("click",(function(){$("#payment-summary").effect("highlight",800)}))})),$(window).scroll((function(){IndicoUI.Effect.followScroll()})),e.setupRegistrationFormListPage=function(){$("#payment-disabled-notice").on("indico:confirmed",".js-enable-payments",(function(e){e.preventDefault();const t=$(this);$.ajax({url:t.data("href"),method:t.data("method"),complete:IndicoUI.Dialogs.Util.progress(),error:handleAjaxError,success(e){$("#payment-disabled-notice").remove(),$("#event-side-menu").html(e.event_menu)}})}))},document.addEventListener("DOMContentLoaded",(()=>{t(),$("#registration-details").parent().on("indico:htmlUpdated",t)})),document.addEventListener("DOMContentLoaded",(()=>{i(),$("#registration-info").parent().on("indico:htmlUpdated",i)})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("registration-form-setup-container");e&&Mn(e);const t=document.getElementById("registration-form-submission-container");t&&Zn(t)}))}(window)},61910:(e,t,i)=>{var n=i(42981),a=i(83234),r=i(94207),s=i(75580),l=i(95919),o=i(19804),d=s((function(e,t){var i=o(t);return l(i)&&(i=void 0),l(e)?n(e,a(t,1,l,!0),r(i,2)):[]}));e.exports=d}},e=>{e.O(0,[4644,4394,2076],(()=>{return t=97772,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=module_events.registration.98e20dbe.bundle.js.map